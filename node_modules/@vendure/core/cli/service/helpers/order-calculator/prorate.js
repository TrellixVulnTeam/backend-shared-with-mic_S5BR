"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.prorate = void 0;
function prorate(weights, amount) {
    const totalWeight = weights.reduce((total, val) => total + val, 0);
    const length = weights.length;
    const actual = [];
    const error = [];
    const rounded = [];
    let added = 0;
    let i = 0;
    for (const w of weights) {
        actual[i] = amount * (w / totalWeight);
        rounded[i] = Math.floor(actual[i]);
        error[i] = actual[i] - rounded[i];
        added += rounded[i];
        i += 1;
    }
    while (added < amount) {
        let maxError = 0.0;
        let maxErrorIndex = -1;
        for (let e = 0; e < length; ++e) {
            if (error[e] > maxError) {
                maxError = error[e];
                maxErrorIndex = e;
            }
        }
        rounded[maxErrorIndex] += 1;
        error[maxErrorIndex] -= 1;
        added += 1;
    }
    return rounded;
}
exports.prorate = prorate;
//# sourceMappingURL=prorate.js.map