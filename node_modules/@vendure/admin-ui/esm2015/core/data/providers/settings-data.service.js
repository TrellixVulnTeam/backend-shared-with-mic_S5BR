import { pick } from '@vendure/common/lib/pick';
import { JobState, } from '../../common/generated-types';
import { ADD_MEMBERS_TO_ZONE, CANCEL_JOB, CREATE_CHANNEL, CREATE_COUNTRY, CREATE_PAYMENT_METHOD, CREATE_TAX_CATEGORY, CREATE_TAX_RATE, CREATE_ZONE, DELETE_CHANNEL, DELETE_COUNTRY, DELETE_PAYMENT_METHOD, DELETE_TAX_CATEGORY, DELETE_TAX_RATE, DELETE_ZONE, GET_ACTIVE_CHANNEL, GET_AVAILABLE_COUNTRIES, GET_CHANNEL, GET_CHANNELS, GET_COUNTRY, GET_COUNTRY_LIST, GET_GLOBAL_SETTINGS, GET_JOBS_BY_ID, GET_JOBS_LIST, GET_JOB_INFO, GET_JOB_QUEUE_LIST, GET_PAYMENT_METHOD, GET_PAYMENT_METHOD_LIST, GET_PAYMENT_METHOD_OPERATIONS, GET_TAX_CATEGORIES, GET_TAX_CATEGORY, GET_TAX_RATE, GET_TAX_RATE_LIST, GET_TAX_RATE_LIST_SIMPLE, GET_ZONES, REMOVE_MEMBERS_FROM_ZONE, UPDATE_CHANNEL, UPDATE_COUNTRY, UPDATE_GLOBAL_SETTINGS, UPDATE_PAYMENT_METHOD, UPDATE_TAX_CATEGORY, UPDATE_TAX_RATE, UPDATE_ZONE, } from '../definitions/settings-definitions';
export class SettingsDataService {
    constructor(baseDataService) {
        this.baseDataService = baseDataService;
    }
    getCountries(take = 10, skip = 0, filterTerm) {
        return this.baseDataService.query(GET_COUNTRY_LIST, {
            options: {
                take,
                skip,
                filter: {
                    name: filterTerm ? { contains: filterTerm } : null,
                },
            },
        });
    }
    getAvailableCountries() {
        return this.baseDataService.query(GET_AVAILABLE_COUNTRIES);
    }
    getCountry(id) {
        return this.baseDataService.query(GET_COUNTRY, { id });
    }
    createCountry(input) {
        return this.baseDataService.mutate(CREATE_COUNTRY, {
            input: pick(input, ['code', 'enabled', 'translations', 'customFields']),
        });
    }
    updateCountry(input) {
        return this.baseDataService.mutate(UPDATE_COUNTRY, {
            input: pick(input, ['id', 'code', 'enabled', 'translations', 'customFields']),
        });
    }
    deleteCountry(id) {
        return this.baseDataService.mutate(DELETE_COUNTRY, {
            id,
        });
    }
    getZones() {
        return this.baseDataService.query(GET_ZONES);
    }
    getZone(id) {
        return this.baseDataService.query(GET_ZONES, { id });
    }
    createZone(input) {
        return this.baseDataService.mutate(CREATE_ZONE, {
            input,
        });
    }
    updateZone(input) {
        return this.baseDataService.mutate(UPDATE_ZONE, {
            input,
        });
    }
    deleteZone(id) {
        return this.baseDataService.mutate(DELETE_ZONE, {
            id,
        });
    }
    addMembersToZone(zoneId, memberIds) {
        return this.baseDataService.mutate(ADD_MEMBERS_TO_ZONE, {
            zoneId,
            memberIds,
        });
    }
    removeMembersFromZone(zoneId, memberIds) {
        return this.baseDataService.mutate(REMOVE_MEMBERS_FROM_ZONE, {
            zoneId,
            memberIds,
        });
    }
    getTaxCategories() {
        return this.baseDataService.query(GET_TAX_CATEGORIES);
    }
    getTaxCategory(id) {
        return this.baseDataService.query(GET_TAX_CATEGORY, {
            id,
        });
    }
    createTaxCategory(input) {
        return this.baseDataService.mutate(CREATE_TAX_CATEGORY, {
            input,
        });
    }
    updateTaxCategory(input) {
        return this.baseDataService.mutate(UPDATE_TAX_CATEGORY, {
            input,
        });
    }
    deleteTaxCategory(id) {
        return this.baseDataService.mutate(DELETE_TAX_CATEGORY, {
            id,
        });
    }
    getTaxRates(take = 10, skip = 0, fetchPolicy) {
        return this.baseDataService.query(GET_TAX_RATE_LIST, {
            options: {
                take,
                skip,
            },
        }, fetchPolicy);
    }
    getTaxRatesSimple(take = 10, skip = 0, fetchPolicy) {
        return this.baseDataService.query(GET_TAX_RATE_LIST_SIMPLE, {
            options: {
                take,
                skip,
            },
        }, fetchPolicy);
    }
    getTaxRate(id) {
        return this.baseDataService.query(GET_TAX_RATE, {
            id,
        });
    }
    createTaxRate(input) {
        return this.baseDataService.mutate(CREATE_TAX_RATE, {
            input,
        });
    }
    updateTaxRate(input) {
        return this.baseDataService.mutate(UPDATE_TAX_RATE, {
            input,
        });
    }
    deleteTaxRate(id) {
        return this.baseDataService.mutate(DELETE_TAX_RATE, {
            id,
        });
    }
    getChannels() {
        return this.baseDataService.query(GET_CHANNELS);
    }
    getChannel(id) {
        return this.baseDataService.query(GET_CHANNEL, {
            id,
        });
    }
    getActiveChannel(fetchPolicy) {
        return this.baseDataService.query(GET_ACTIVE_CHANNEL, {}, fetchPolicy);
    }
    createChannel(input) {
        return this.baseDataService.mutate(CREATE_CHANNEL, {
            input,
        });
    }
    updateChannel(input) {
        return this.baseDataService.mutate(UPDATE_CHANNEL, {
            input,
        });
    }
    deleteChannel(id) {
        return this.baseDataService.mutate(DELETE_CHANNEL, {
            id,
        });
    }
    getPaymentMethods(take = 10, skip = 0) {
        return this.baseDataService.query(GET_PAYMENT_METHOD_LIST, {
            options: {
                skip,
                take,
            },
        });
    }
    getPaymentMethod(id) {
        return this.baseDataService.query(GET_PAYMENT_METHOD, {
            id,
        });
    }
    createPaymentMethod(input) {
        return this.baseDataService.mutate(CREATE_PAYMENT_METHOD, {
            input,
        });
    }
    updatePaymentMethod(input) {
        return this.baseDataService.mutate(UPDATE_PAYMENT_METHOD, {
            input,
        });
    }
    deletePaymentMethod(id, force) {
        return this.baseDataService.mutate(DELETE_PAYMENT_METHOD, {
            id,
            force,
        });
    }
    getPaymentMethodOperations() {
        return this.baseDataService.query(GET_PAYMENT_METHOD_OPERATIONS);
    }
    getGlobalSettings(fetchPolicy) {
        return this.baseDataService.query(GET_GLOBAL_SETTINGS, undefined, fetchPolicy);
    }
    updateGlobalSettings(input) {
        return this.baseDataService.mutate(UPDATE_GLOBAL_SETTINGS, {
            input,
        });
    }
    getJob(id) {
        return this.baseDataService.query(GET_JOB_INFO, { id });
    }
    pollJobs(ids) {
        return this.baseDataService.query(GET_JOBS_BY_ID, {
            ids,
        });
    }
    getAllJobs(options) {
        return this.baseDataService.query(GET_JOBS_LIST, {
            options,
        }, 'cache-first');
    }
    getJobQueues() {
        return this.baseDataService.query(GET_JOB_QUEUE_LIST);
    }
    getRunningJobs() {
        return this.baseDataService.query(GET_JOBS_LIST, {
            options: {
                filter: {
                    state: {
                        eq: JobState.RUNNING,
                    },
                },
            },
        });
    }
    cancelJob(id) {
        return this.baseDataService.mutate(CANCEL_JOB, {
            id,
        });
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2V0dGluZ3MtZGF0YS5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL2xpYi9jb3JlL3NyYy9kYXRhL3Byb3ZpZGVycy9zZXR0aW5ncy1kYXRhLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBRWhELE9BQU8sRUEyQ0gsUUFBUSxHQWdCWCxNQUFNLDhCQUE4QixDQUFDO0FBQ3RDLE9BQU8sRUFDSCxtQkFBbUIsRUFDbkIsVUFBVSxFQUNWLGNBQWMsRUFDZCxjQUFjLEVBQ2QscUJBQXFCLEVBQ3JCLG1CQUFtQixFQUNuQixlQUFlLEVBQ2YsV0FBVyxFQUNYLGNBQWMsRUFDZCxjQUFjLEVBQ2QscUJBQXFCLEVBQ3JCLG1CQUFtQixFQUNuQixlQUFlLEVBQ2YsV0FBVyxFQUNYLGtCQUFrQixFQUNsQix1QkFBdUIsRUFDdkIsV0FBVyxFQUNYLFlBQVksRUFDWixXQUFXLEVBQ1gsZ0JBQWdCLEVBQ2hCLG1CQUFtQixFQUNuQixjQUFjLEVBQ2QsYUFBYSxFQUNiLFlBQVksRUFDWixrQkFBa0IsRUFDbEIsa0JBQWtCLEVBQ2xCLHVCQUF1QixFQUN2Qiw2QkFBNkIsRUFDN0Isa0JBQWtCLEVBQ2xCLGdCQUFnQixFQUNoQixZQUFZLEVBQ1osaUJBQWlCLEVBQ2pCLHdCQUF3QixFQUN4QixTQUFTLEVBQ1Qsd0JBQXdCLEVBQ3hCLGNBQWMsRUFDZCxjQUFjLEVBQ2Qsc0JBQXNCLEVBQ3RCLHFCQUFxQixFQUNyQixtQkFBbUIsRUFDbkIsZUFBZSxFQUNmLFdBQVcsR0FDZCxNQUFNLHFDQUFxQyxDQUFDO0FBSTdDLE1BQU0sT0FBTyxtQkFBbUI7SUFDNUIsWUFBb0IsZUFBZ0M7UUFBaEMsb0JBQWUsR0FBZixlQUFlLENBQWlCO0lBQUcsQ0FBQztJQUV4RCxZQUFZLENBQUMsT0FBZSxFQUFFLEVBQUUsT0FBZSxDQUFDLEVBQUUs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QUFPLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUM5QixzQkFBc0IsRUFDdEI7WUFDSSxLQUFLO1NBQ1IsQ0FDSixDQUFDO0lBQ04sQ0FBQztJQUVELE1BQU0sQ0FBQyxFQUFVO1FBQ2IsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBeUMsWUFBWSxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUNwRyxDQUFDO0lBRUQsUUFBUSxDQUFDLEdBQWE7UUFDbEIsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBMkMsY0FBYyxFQUFFO1lBQ3hGLEdBQUc7U0FDTixDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQsVUFBVSxDQUFDLE9BQXdCO1FBQy9CLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQzdCLGFBQWEsRUFDYjtZQUNJLE9BQU87U0FDVixFQUNELGFBQWEsQ0FDaEIsQ0FBQztJQUNOLENBQUM7SUFFRCxZQUFZO1FBQ1IsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FBd0Isa0JBQWtCLENBQUMsQ0FBQztJQUNqRixDQUFDO0lBRUQsY0FBYztRQUNWLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQXlDLGFBQWEsRUFBRTtZQUNyRixPQUFPLEVBQUU7Z0JBQ0wsTUFBTSxFQUFFO29CQUNKLEtBQUssRUFBRTt3QkFDSCxFQUFFLEVBQUUsUUFBUSxDQUFDLE9BQU87cUJBQ3ZCO2lCQUNKO2FBQ0o7U0FDSixDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQsU0FBUyxDQUFDLEVBQVU7UUFDaEIsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBMEMsVUFBVSxFQUFFO1lBQ3BGLEVBQUU7U0FDTCxDQUFDLENBQUM7SUFDUCxDQUFDO0NBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGZXRjaFBvbGljeSwgV2F0Y2hRdWVyeUZldGNoUG9saWN5IH0gZnJvbSAnQGFwb2xsby9jbGllbnQvY29yZSc7XHJcbmltcG9ydCB7IHBpY2sgfSBmcm9tICdAdmVuZHVyZS9jb21tb24vbGliL3BpY2snO1xyXG5cclxuaW1wb3J0IHtcclxuICAgIEFkZE1lbWJlcnNUb1pvbmUsXHJcbiAgICBDYW5jZWxKb2IsXHJcbiAgICBDcmVhdGVDaGFubmVsLFxyXG4gICAgQ3JlYXRlQ2hhbm5lbElucHV0LFxyXG4gICAgQ3JlYXRlQ291bnRyeSxcclxuICAgIENyZWF0ZUNvdW50cnlJbnB1dCxcclxuICAgIENyZWF0ZVBheW1lbnRNZXRob2QsXHJcbiAgICBDcmVhdGVQYXltZW50TWV0aG9kSW5wdXQsXHJcbiAgICBDcmVhdGVUYXhDYXRlZ29yeSxcclxuICAgIENyZWF0ZVRheENhdGVnb3J5SW5wdXQsXHJcbiAgICBDcmVhdGVUYXhSYXRlLFxyXG4gICAgQ3JlYXRlVGF4UmF0ZUlucHV0LFxyXG4gICAgQ3JlYXRlWm9uZSxcclxuICAgIENyZWF0ZVpvbmVJbnB1dCxcclxuICAgIERlbGV0ZUNoYW5uZWwsXHJcbiAgICBEZWxldGVDb3VudHJ5LFxyXG4gICAgRGVsZXRlUGF5bWVudE1ldGhvZCxcclxuICAgIERlbGV0ZVRheENhdGVnb3J5LFxyXG4gICAgRGVsZXRlVGF4UmF0ZSxcclxuICAgIERlbGV0ZVpvbmUsXHJcbiAgICBHZXRBY3RpdmVDaGFubmVsLFxyXG4gICAgR2V0QWxsSm9icyxcclxuICAgIEdldEF2YWlsYWJsZUNvdW50cmllcyxcclxuICAgIEdldENoYW5uZWwsXHJcbiAgICBHZXRDaGFubmVscyxcclxuICAgIEdldENvdW50cnksXHJcbiAgICBHZXRDb3VudHJ5TGlzdCxcclxuICAgIEdldEdsb2JhbFNldHRpbmdzLFxyXG4gICAgR2V0Sm9iSW5mbyxcclxuICAgIEdldEpvYlF1ZXVlTGlzdCxcclxuICAgIEdldEpvYnNCeUlkLFxyXG4gICAgR2V0UGF5bWVudE1ldGhvZCxcclxuICAgIEdldFBheW1lbnRNZXRob2RMaXN0LFxyXG4gICAgR2V0UGF5bWVudE1ldGhvZE9wZXJhdGlvbnMsXHJcbiAgICBHZXRUYXhDYXRlZ29yaWVzLFxyXG4gICAgR2V0VGF4Q2F0ZWdvcnksXHJcbiAgICBHZXRUYXhSYXRlLFxyXG4gICAgR2V0VGF4UmF0ZUxpc3QsXHJcbiAgICBHZXRUYXhSYXRlTGlzdFNpbXBsZSxcclxuICAgIEdldFpvbmUsXHJcbiAgICBHZXRab25lcyxcclxuICAgIEpvYkxpc3RPcHRpb25zLFxyXG4gICAgSm9iU3RhdGUsXHJcbiAgICBSZW1vdmVNZW1iZXJzRnJvbVpvbmUsXHJcbiAgICBVcGRhdGVDaGFubmVsLFxyXG4gICAgVXBkYXRlQ2hhbm5lbElucHV0LFxyXG4gICAgVXBkYXRlQ291bnRyeSxcclxuICAgIFVwZGF0ZUNvdW50cnlJbnB1dCxcclxuICAgIFVwZGF0ZUdsb2JhbFNldHRpbmdzLFxyXG4gICAgVXBkYXRlR2xvYmFsU2V0dGluZ3NJbnB1dCxcclxuICAgIFVwZGF0ZVBheW1lbnRNZXRob2QsXHJcbiAgICBVcGRhdGVQYXltZW50TWV0aG9kSW5wdXQsXHJcbiAgICBVcGRhdGVUYXhDYXRlZ29yeSxcclxuICAgIFVwZGF0ZVRheENhdGVnb3J5SW5wdXQsXHJcbiAgICBVcGRhdGVUYXhSYXRlLFxyXG4gICAgVXBkYXRlVGF4UmF0ZUlucHV0LFxyXG4gICAgVXBkYXRlWm9uZSxcclxuICAgIFVwZGF0ZVpvbmVJbnB1dCxcclxufSBmcm9tICcuLi8uLi9jb21tb24vZ2VuZXJhdGVkLXR5cGVzJztcclxuaW1wb3J0IHtcclxuICAgIEFERF9NRU1CRVJTX1RPX1pPTkUsXHJcbiAgICBDQU5DRUxfSk9CLFxyXG4gICAgQ1JFQVRFX0NIQU5ORUwsXHJcbiAgICBDUkVBVEVfQ09VTlRSWSxcclxuICAgIENSRUFURV9QQVlNRU5UX01FVEhPRCxcclxuICAgIENSRUFURV9UQVhfQ0FURUdPUlksXHJcbiAgICBDUkVBVEVfVEFYX1JBVEUsXHJcbiAgICBDUkVBVEVfWk9ORSxcclxuICAgIERFTEVURV9DSEFOTkVMLFxyXG4gICAgREVMRVRFX0NPVU5UUlksXHJcbiAgICBERUxFVEVfUEFZTUVOVF9NRVRIT0QsXHJcbiAgICBERUxFVEVfVEFYX0NBVEVHT1JZLFxyXG4gICAgREVMRVRFX1RBWF9SQVRFLFxyXG4gICAgREVMRVRFX1pPTkUsXHJcbiAgICBHRVRfQUNUSVZFX0NIQU5ORUwsXHJcbiAgICBHRVRfQVZBSUxBQkxFX0NPVU5UUklFUyxcclxuICAgIEdFVF9DSEFOTkVMLFxyXG4gICAgR0VUX0NIQU5ORUxTLFxyXG4gICAgR0VUX0NPVU5UUlksXHJcbiAgICBHRVRfQ09VTlRSWV9MSVNULFxyXG4gICAgR0VUX0dMT0JBTF9TRVRUSU5HUyxcclxuICAgIEdFVF9KT0JTX0JZX0lELFxyXG4gICAgR0VUX0pPQlNfTElTVCxcclxuICAgIEdFVF9KT0JfSU5GTyxcclxuICAgIEdFVF9KT0JfUVVFVUVfTElTVCxcclxuICAgIEdFVF9QQVlNRU5UX01FVEhPRCxcclxuICAgIEdFVF9QQVlNRU5UX01FVEhPRF9MSVNULFxyXG4gICAgR0VUX1BBWU1FTlRfTUVUSE9EX09QRVJBVElPTlMsXHJcbiAgICBHRVRfVEFYX0NBVEVHT1JJRVMsXHJcbiAgICBHRVRfVEFYX0NBVEVHT1JZLFxyXG4gICAgR0VUX1RBWF9SQVRFLFxyXG4gICAgR0VUX1RBWF9SQVRFX0xJU1QsXHJcbiAgICBHRVRfVEFYX1JBVEVfTElTVF9TSU1QTEUsXHJcbiAgICBHRVRfWk9ORVMsXHJcbiAgICBSRU1PVkVfTUVNQkVSU19GUk9NX1pPTkUsXHJcbiAgICBVUERBVEVfQ0hBTk5FTCxcclxuICAgIFVQREFURV9DT1VOVFJZLFxyXG4gICAgVVBEQVRFX0dMT0JBTF9TRVRUSU5HUyxcclxuICAgIFVQREFURV9QQVlNRU5UX01FVEhPRCxcclxuICAgIFVQREFURV9UQVhfQ0FURUdPUlksXHJcbiAgICBVUERBVEVfVEFYX1JBVEUsXHJcbiAgICBVUERBVEVfWk9ORSxcclxufSBmcm9tICcuLi9kZWZpbml0aW9ucy9zZXR0aW5ncy1kZWZpbml0aW9ucyc7XHJcblxyXG5pbXBvcnQgeyBCYXNlRGF0YVNlcnZpY2UgfSBmcm9tICcuL2Jhc2UtZGF0YS5zZXJ2aWNlJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTZXR0aW5nc0RhdGFTZXJ2aWNlIHtcclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgYmFzZURhdGFTZXJ2aWNlOiBCYXNlRGF0YVNlcnZpY2UpIHt9XHJcblxyXG4gICAgZ2V0Q291bnRyaWVzKHRha2U6IG51bWJlciA9IDEwLCBza2lwOiBudW1iZXIgPSAwLCBmaWx0ZXJUZXJtPzogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLnF1ZXJ5PEdldENvdW50cnlMaXN0LlF1ZXJ5LCBHZXRDb3VudHJ5TGlzdC5WYXJpYWJsZXM+KEdFVF9DT1VOVFJZX0xJU1QsIHtcclxuICAgICAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgdGFrZSxcclxuICAgICAgICAgICAgICAgIHNraXAsXHJcbiAgICAgICAgICAgICAgICBmaWx0ZXI6IHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBmaWx0ZXJUZXJtID8geyBjb250YWluczogZmlsdGVyVGVybSB9IDogbnVsbCxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QXZhaWxhYmxlQ291bnRyaWVzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5xdWVyeTxHZXRBdmFpbGFibGVDb3VudHJpZXMuUXVlcnk+KEdFVF9BVkFJTEFCTEVfQ09VTlRSSUVTKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDb3VudHJ5KGlkOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UucXVlcnk8R2V0Q291bnRyeS5RdWVyeSwgR2V0Q291bnRyeS5WYXJpYWJsZXM+KEdFVF9DT1VOVFJZLCB7IGlkIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZUNvdW50cnkoaW5wdXQ6IENyZWF0ZUNvdW50cnlJbnB1dCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8Q3JlYXRlQ291bnRyeS5NdXRhdGlvbiwgQ3JlYXRlQ291bnRyeS5WYXJpYWJsZXM+KENSRUFURV9DT1VOVFJZLCB7XHJcbiAgICAgICAgICAgIGlucHV0OiBwaWNrKGlucHV0LCBbJ2NvZGUnLCAnZW5hYmxlZCcsICd0cmFuc2xhdGlvbnMnLCAnY3VzdG9tRmllbGRzJ10pLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUNvdW50cnkoaW5wdXQ6IFVwZGF0ZUNvdW50cnlJbnB1dCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8VXBkYXRlQ291bnRyeS5NdXRhdGlvbiwgVXBkYXRlQ291bnRyeS5WYXJpYWJsZXM+KFVQREFURV9DT1VOVFJZLCB7XHJcbiAgICAgICAgICAgIGlucHV0OiBwaWNrKGlucHV0LCBbJ2lkJywgJ2NvZGUnLCAnZW5hYmxlZCcsICd0cmFuc2xhdGlvbnMnLCAnY3VzdG9tRmllbGRzJ10pLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZUNvdW50cnkoaWQ6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8RGVsZXRlQ291bnRyeS5NdXRhdGlvbiwgRGVsZXRlQ291bnRyeS5WYXJpYWJsZXM+KERFTEVURV9DT1VOVFJZLCB7XHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFpvbmVzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5xdWVyeTxHZXRab25lcy5RdWVyeT4oR0VUX1pPTkVTKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRab25lKGlkOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UucXVlcnk8R2V0Wm9uZS5RdWVyeSwgR2V0Wm9uZS5WYXJpYWJsZXM+KEdFVF9aT05FUywgeyBpZCB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVab25lKGlucHV0OiBDcmVhdGVab25lSW5wdXQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPENyZWF0ZVpvbmUuTXV0YXRpb24sIENyZWF0ZVpvbmUuVmFyaWFibGVzPihDUkVBVEVfWk9ORSwge1xyXG4gICAgICAgICAgICBpbnB1dCxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVab25lKGlucHV0OiBVcGRhdGVab25lSW5wdXQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPFVwZGF0ZVpvbmUuTXV0YXRpb24sIFVwZGF0ZVpvbmUuVmFyaWFibGVzPihVUERBVEVfWk9ORSwge1xyXG4gICAgICAgICAgICBpbnB1dCxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBkZWxldGVab25lKGlkOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPERlbGV0ZVpvbmUuTXV0YXRpb24sIERlbGV0ZVpvbmUuVmFyaWFibGVzPihERUxFVEVfWk9ORSwge1xyXG4gICAgICAgICAgICBpZCxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRNZW1iZXJzVG9ab25lKHpvbmVJZDogc3RyaW5nLCBtZW1iZXJJZHM6IHN0cmluZ1tdKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxBZGRNZW1iZXJzVG9ab25lLk11dGF0aW9uLCBBZGRNZW1iZXJzVG9ab25lLlZhcmlhYmxlcz4oXHJcbiAgICAgICAgICAgIEFERF9NRU1CRVJTX1RPX1pPTkUsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHpvbmVJZCxcclxuICAgICAgICAgICAgICAgIG1lbWJlcklkcyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZU1lbWJlcnNGcm9tWm9uZSh6b25lSWQ6IHN0cmluZywgbWVtYmVySWRzOiBzdHJpbmdbXSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8UmVtb3ZlTWVtYmVyc0Zyb21ab25lLk11dGF0aW9uLCBSZW1vdmVNZW1iZXJzRnJvbVpvbmUuVmFyaWFibGVzPihcclxuICAgICAgICAgICAgUkVNT1ZFX01FTUJFUlNfRlJPTV9aT05FLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB6b25lSWQsXHJcbiAgICAgICAgICAgICAgICBtZW1iZXJJZHMsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRUYXhDYXRlZ29yaWVzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5xdWVyeTxHZXRUYXhDYXRlZ29yaWVzLlF1ZXJ5PihHRVRfVEFYX0NBVEVHT1JJRVMpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFRheENhdGVnb3J5KGlkOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UucXVlcnk8R2V0VGF4Q2F0ZWdvcnkuUXVlcnksIEdldFRheENhdGVnb3J5LlZhcmlhYmxlcz4oR0VUX1RBWF9DQVRFR09SWSwge1xyXG4gICAgICAgICAgICBpZCxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVUYXhDYXRlZ29yeShpbnB1dDogQ3JlYXRlVGF4Q2F0ZWdvcnlJbnB1dCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8Q3JlYXRlVGF4Q2F0ZWdvcnkuTXV0YXRpb24sIENyZWF0ZVRheENhdGVnb3J5LlZhcmlhYmxlcz4oXHJcbiAgICAgICAgICAgIENSRUFURV9UQVhfQ0FURUdPUlksXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlucHV0LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlVGF4Q2F0ZWdvcnkoaW5wdXQ6IFVwZGF0ZVRheENhdGVnb3J5SW5wdXQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPFVwZGF0ZVRheENhdGVnb3J5Lk11dGF0aW9uLCBVcGRhdGVUYXhDYXRlZ29yeS5WYXJpYWJsZXM+KFxyXG4gICAgICAgICAgICBVUERBVEVfVEFYX0NBVEVHT1JZLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZVRheENhdGVnb3J5KGlkOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPERlbGV0ZVRheENhdGVnb3J5Lk11dGF0aW9uLCBEZWxldGVUYXhSYXRlLlZhcmlhYmxlcz4oXHJcbiAgICAgICAgICAgIERFTEVURV9UQVhfQ0FURUdPUlksXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VGF4UmF0ZXModGFrZTogbnVtYmVyID0gMTAsIHNraXA6IG51bWJlciA9IDAsIGZldGNoUG9saWN5PzogRmV0Y2hQb2xpY3kpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UucXVlcnk8R2V0VGF4UmF0ZUxpc3QuUXVlcnksIEdldFRheFJhdGVMaXN0LlZhcmlhYmxlcz4oXHJcbiAgICAgICAgICAgIEdFVF9UQVhfUkFURV9MSVNULFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZSxcclxuICAgICAgICAgICAgICAgICAgICBza2lwLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZmV0Y2hQb2xpY3ksXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRUYXhSYXRlc1NpbXBsZSh0YWtlOiBudW1iZXIgPSAxMCwgc2tpcDogbnVtYmVyID0gMCwgZmV0Y2hQb2xpY3k/OiBGZXRjaFBvbGljeSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5xdWVyeTxHZXRUYXhSYXRlTGlzdFNpbXBsZS5RdWVyeSwgR2V0VGF4UmF0ZUxpc3RTaW1wbGUuVmFyaWFibGVzPihcclxuICAgICAgICAgICAgR0VUX1RBWF9SQVRFX0xJU1RfU0lNUExFLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZSxcclxuICAgICAgICAgICAgICAgICAgICBza2lwLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZmV0Y2hQb2xpY3ksXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRUYXhSYXRlKGlkOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UucXVlcnk8R2V0VGF4UmF0ZS5RdWVyeSwgR2V0VGF4UmF0ZS5WYXJpYWJsZXM+KEdFVF9UQVhfUkFURSwge1xyXG4gICAgICAgICAgICBpZCxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVUYXhSYXRlKGlucHV0OiBDcmVhdGVUYXhSYXRlSW5wdXQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPENyZWF0ZVRheFJhdGUuTXV0YXRpb24sIENyZWF0ZVRheFJhdGUuVmFyaWFibGVzPihDUkVBVEVfVEFYX1JBVEUsIHtcclxuICAgICAgICAgICAgaW5wdXQsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlVGF4UmF0ZShpbnB1dDogVXBkYXRlVGF4UmF0ZUlucHV0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxVcGRhdGVUYXhSYXRlLk11dGF0aW9uLCBVcGRhdGVUYXhSYXRlLlZhcmlhYmxlcz4oVVBEQVRFX1RBWF9SQVRFLCB7XHJcbiAgICAgICAgICAgIGlucHV0LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZVRheFJhdGUoaWQ6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8RGVsZXRlVGF4UmF0ZS5NdXRhdGlvbiwgRGVsZXRlVGF4UmF0ZS5WYXJpYWJsZXM+KERFTEVURV9UQVhfUkFURSwge1xyXG4gICAgICAgICAgICBpZCxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDaGFubmVscygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UucXVlcnk8R2V0Q2hhbm5lbHMuUXVlcnk+KEdFVF9DSEFOTkVMUyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q2hhbm5lbChpZDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLnF1ZXJ5PEdldENoYW5uZWwuUXVlcnksIEdldENoYW5uZWwuVmFyaWFibGVzPihHRVRfQ0hBTk5FTCwge1xyXG4gICAgICAgICAgICBpZCxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRBY3RpdmVDaGFubmVsKGZldGNoUG9saWN5PzogRmV0Y2hQb2xpY3kpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UucXVlcnk8R2V0QWN0aXZlQ2hhbm5lbC5RdWVyeSwgR2V0QWN0aXZlQ2hhbm5lbC5WYXJpYWJsZXM+KFxyXG4gICAgICAgICAgICBHRVRfQUNUSVZFX0NIQU5ORUwsXHJcbiAgICAgICAgICAgIHt9LFxyXG4gICAgICAgICAgICBmZXRjaFBvbGljeSxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZUNoYW5uZWwoaW5wdXQ6IENyZWF0ZUNoYW5uZWxJbnB1dCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8Q3JlYXRlQ2hhbm5lbC5NdXRhdGlvbiwgQ3JlYXRlQ2hhbm5lbC5WYXJpYWJsZXM+KENSRUFURV9DSEFOTkVMLCB7XHJcbiAgICAgICAgICAgIGlucHV0LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUNoYW5uZWwoaW5wdXQ6IFVwZGF0ZUNoYW5uZWxJbnB1dCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8VXBkYXRlQ2hhbm5lbC5NdXRhdGlvbiwgVXBkYXRlQ2hhbm5lbC5WYXJpYWJsZXM+KFVQREFURV9DSEFOTkVMLCB7XHJcbiAgICAgICAgICAgIGlucHV0LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZUNoYW5uZWwoaWQ6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8RGVsZXRlQ2hhbm5lbC5NdXRhdGlvbiwgRGVsZXRlQ2hhbm5lbC5WYXJpYWJsZXM+KERFTEVURV9DSEFOTkVMLCB7XHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFBheW1lbnRNZXRob2RzKHRha2U6IG51bWJlciA9IDEwLCBza2lwOiBudW1iZXIgPSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLnF1ZXJ5PEdldFBheW1lbnRNZXRob2RMaXN0LlF1ZXJ5LCBHZXRQYXltZW50TWV0aG9kTGlzdC5WYXJpYWJsZXM+KFxyXG4gICAgICAgICAgICBHRVRfUEFZTUVOVF9NRVRIT0RfTElTVCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgICAgIHNraXAsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFrZSxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRQYXltZW50TWV0aG9kKGlkOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UucXVlcnk8R2V0UGF5bWVudE1ldGhvZC5RdWVyeSwgR2V0UGF5bWVudE1ldGhvZC5WYXJpYWJsZXM+KFxyXG4gICAgICAgICAgICBHRVRfUEFZTUVOVF9NRVRIT0QsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlUGF5bWVudE1ldGhvZChpbnB1dDogQ3JlYXRlUGF5bWVudE1ldGhvZElucHV0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxDcmVhdGVQYXltZW50TWV0aG9kLk11dGF0aW9uLCBDcmVhdGVQYXltZW50TWV0aG9kLlZhcmlhYmxlcz4oXHJcbiAgICAgICAgICAgIENSRUFURV9QQVlNRU5UX01FVEhPRCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW5wdXQsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVQYXltZW50TWV0aG9kKGlucHV0OiBVcGRhdGVQYXltZW50TWV0aG9kSW5wdXQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPFVwZGF0ZVBheW1lbnRNZXRob2QuTXV0YXRpb24sIFVwZGF0ZVBheW1lbnRNZXRob2QuVmFyaWFibGVzPihcclxuICAgICAgICAgICAgVVBEQVRFX1BBWU1FTlRfTUVUSE9ELFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZVBheW1lbnRNZXRob2QoaWQ6IHN0cmluZywgZm9yY2U6IGJvb2xlYW4pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPERlbGV0ZVBheW1lbnRNZXRob2QuTXV0YXRpb24sIERlbGV0ZVBheW1lbnRNZXRob2QuVmFyaWFibGVzPihcclxuICAgICAgICAgICAgREVMRVRFX1BBWU1FTlRfTUVUSE9ELFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgICAgIGZvcmNlLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UGF5bWVudE1ldGhvZE9wZXJhdGlvbnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLnF1ZXJ5PEdldFBheW1lbnRNZXRob2RPcGVyYXRpb25zLlF1ZXJ5PihHRVRfUEFZTUVOVF9NRVRIT0RfT1BFUkFUSU9OUyk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0R2xvYmFsU2V0dGluZ3MoZmV0Y2hQb2xpY3k/OiBXYXRjaFF1ZXJ5RmV0Y2hQb2xpY3kpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UucXVlcnk8R2V0R2xvYmFsU2V0dGluZ3MuUXVlcnk+KFxyXG4gICAgICAgICAgICBHRVRfR0xPQkFMX1NFVFRJTkdTLFxyXG4gICAgICAgICAgICB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIGZldGNoUG9saWN5LFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlR2xvYmFsU2V0dGluZ3MoaW5wdXQ6IFVwZGF0ZUdsb2JhbFNldHRpbmdzSW5wdXQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPFVwZGF0ZUdsb2JhbFNldHRpbmdzLk11dGF0aW9uLCBVcGRhdGVHbG9iYWxTZXR0aW5ncy5WYXJpYWJsZXM+KFxyXG4gICAgICAgICAgICBVUERBVEVfR0xPQkFMX1NFVFRJTkdTLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEpvYihpZDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLnF1ZXJ5PEdldEpvYkluZm8uUXVlcnksIEdldEpvYkluZm8uVmFyaWFibGVzPihHRVRfSk9CX0lORk8sIHsgaWQgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcG9sbEpvYnMoaWRzOiBzdHJpbmdbXSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5xdWVyeTxHZXRKb2JzQnlJZC5RdWVyeSwgR2V0Sm9ic0J5SWQuVmFyaWFibGVzPihHRVRfSk9CU19CWV9JRCwge1xyXG4gICAgICAgICAgICBpZHMsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0QWxsSm9icyhvcHRpb25zPzogSm9iTGlzdE9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UucXVlcnk8R2V0QWxsSm9icy5RdWVyeSwgR2V0QWxsSm9icy5WYXJpYWJsZXM+KFxyXG4gICAgICAgICAgICBHRVRfSk9CU19MSVNULFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnY2FjaGUtZmlyc3QnLFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Sm9iUXVldWVzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5xdWVyeTxHZXRKb2JRdWV1ZUxpc3QuUXVlcnk+KEdFVF9KT0JfUVVFVUVfTElTVCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0UnVubmluZ0pvYnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLnF1ZXJ5PEdldEFsbEpvYnMuUXVlcnksIEdldEFsbEpvYnMuVmFyaWFibGVzPihHRVRfSk9CU19MSVNULCB7XHJcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgIGZpbHRlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVxOiBKb2JTdGF0ZS5SVU5OSU5HLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNhbmNlbEpvYihpZDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxDYW5jZWxKb2IuTXV0YXRpb24sIENhbmNlbEpvYi5WYXJpYWJsZXM+KENBTkNFTF9KT0IsIHtcclxuICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIl19