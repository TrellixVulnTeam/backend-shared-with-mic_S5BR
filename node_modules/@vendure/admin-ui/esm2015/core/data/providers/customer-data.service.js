import { ADD_CUSTOMERS_TO_GROUP, ADD_NOTE_TO_CUSTOMER, CREATE_CUSTOMER, CREATE_CUSTOMER_ADDRESS, CREATE_CUSTOMER_GROUP, DELETE_CUSTOMER, DELETE_CUSTOMER_ADDRESS, DELETE_CUSTOMER_GROUP, DELETE_CUSTOMER_NOTE, GET_CUSTOMER, GET_CUSTOMER_GROUPS, GET_CUSTOMER_GROUP_WITH_CUSTOMERS, GET_CUSTOMER_HISTORY, GET_CUSTOMER_LIST, REMOVE_CUSTOMERS_FROM_GROUP, UPDATE_CUSTOMER, UPDATE_CUSTOMER_ADDRESS, UPDATE_CUSTOMER_GROUP, UPDATE_CUSTOMER_NOTE, } from '../definitions/customer-definitions';
export class CustomerDataService {
    constructor(baseDataService) {
        this.baseDataService = baseDataService;
    }
    getCustomerList(take = 10, skip = 0, filterTerm) {
        const filter = filterTerm
            ? {
                filter: {
                    emailAddress: {
                        contains: filterTerm,
                    },
                },
            }
            : {};
        return this.baseDataService.query(GET_CUSTOMER_LIST, {
            options: Object.assign({ take,
                skip }, filter),
        });
    }
    getCustomer(id, orderListOptions) {
        return this.baseDataService.query(GET_CUSTOMER, {
            id,
            orderListOptions,
        });
    }
    createCustomer(input, password) {
        return this.baseDataService.mutate(CREATE_CUSTOMER, {
            input,
            password,
        });
    }
    updateCustomer(input) {
        return this.baseDataService.mutate(UPDATE_CUSTOMER, {
            input,
        });
    }
    deleteCustomer(id) {
        return this.baseDataService.mutate(DELETE_CUSTOMER, { id });
    }
    createCustomerAddress(customerId, input) {
        return this.baseDataService.mutate(CREATE_CUSTOMER_ADDRESS, {
            customerId,
            input,
        });
    }
    updateCustomerAddress(input) {
        return this.baseDataService.mutate(UPDATE_CUSTOMER_ADDRESS, {
            input,
        });
    }
    deleteCustomerAddress(id) {
        return this.baseDataService.mutate(DELETE_CUSTOMER_ADDRESS, { id });
    }
    createCustomerGroup(input) {
        return this.baseDataService.mutate(CREATE_CUSTOMER_GROUP, {
            input,
        });
    }
    updateCustomerGroup(input) {
        return this.baseDataService.mutate(UPDATE_CUSTOMER_GROUP, {
            input,
        });
    }
    deleteCustomerGroup(id) {
        return this.baseDataService.mutate(DELETE_CUSTOMER_GROUP, { id });
    }
    getCustomerGroupList(options) {
        return this.baseDataService.query(GET_CUSTOMER_GROUPS, {
            options,
        });
    }
    getCustomerGroupWithCustomers(id, options) {
        return this.baseDataService.query(GET_CUSTOMER_GROUP_WITH_CUSTOMERS, {
            id,
            options,
        });
    }
    addCustomersToGroup(groupId, customerIds) {
        return this.baseDataService.mutate(ADD_CUSTOMERS_TO_GROUP, {
            groupId,
            customerIds,
        });
    }
    removeCustomersFromGroup(groupId, customerIds) {
        return this.baseDataService.mutate(REMOVE_CUSTOMERS_FROM_GROUP, {
            groupId,
            customerIds,
        });
    }
    getCustomerHistory(id, options) {
        return this.baseDataService.query(GET_CUSTOMER_HISTORY, {
            id,
            options,
        });
    }
    addNoteToCustomer(customerId, note) {
        return this.baseDataService.mutate(ADD_NOTE_TO_CUSTOMER, {
            input: {
                note,
                isPublic: false,
                id: customerId,
            },
        });
    }
    updateCustomerNote(input) {
        return this.baseDataService.mutate(UPDATE_CUSTOMER_NOTE, {
            input,
        });
    }
    deleteCustomerNote(id) {
        return this.baseDataService.mutate(DELETE_CUSTOMER_NOTE, {
            id,
        });
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3VzdG9tZXItZGF0YS5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL2xpYi9jb3JlL3NyYy9kYXRhL3Byb3ZpZGVycy9jdXN0b21lci1kYXRhLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBZ0NBLE9BQU8sRUFDSCxzQkFBc0IsRUFDdEIsb0JBQW9CLEVBQ3BCLGVBQWUsRUFDZix1QkFBdUIsRUFDdkIscUJBQXFCLEVBQ3JCLGVBQWUsRUFDZix1QkFBdUIsRUFDdkIscUJBQXFCLEVBQ3JCLG9CQUFvQixFQUNwQixZQUFZLEVBQ1osbUJBQW1CLEVBQ25CLGlDQUFpQyxFQUNqQyxvQkFBb0IsRUFDcEIsaUJBQWlCLEVBQ2pCLDJCQUEyQixFQUMzQixlQUFlLEVBQ2YsdUJBQXVCLEVBQ3ZCLHFCQUFxQixFQUNyQixvQkFBb0IsR0FDdkIsTUFBTSxxQ0FBcUMsQ0FBQztBQUk3QyxNQUFNLE9BQU8sbUJBQW1CO0lBQzVCLFlBQW9CLGVBQWdDO1FBQWhDLG9CQUFlLEdBQWYsZUFBZSxDQUFpQjtJQUFHLENBQUM7SUFFeEQsZUFBZSxDQUFDLE9BQWUsRUFBRSxFQUFFLE9BQWUsQ0FBQyxFQUFFLFVBQW1CO1FBQ3BFLE1BQU0sTUFBTSxHQUFHLFVBQVU7WUFDckIsQ0FBQyxDQUFDO2dCQUNJLE1BQU0sRUFBRTtvQkFDSixZQUFZLEVBQUU7d0JBQ1YsUUFBUSxFQUFFLFVBQVU7cUJBQ3ZCO2lCQUNKO2FBQ0o7WUFDSCxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQ1QsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLEtBQUssQ0FDN0IsaUJBQWlCLEVBQ2pCO1lBQ0ksT0FBTyxrQkFDSCxJQUFJO2dCQUNKLElBQUksSUFDRCxNQUFNLENBQ1o7U0FDSixDQUNKLENBQUM7SUFDTixDQUFDO0lBRUQsV0FBVyxDQUFDLEVBQVUsRUFBRSxnQkFBbUM7UUFDdkQsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLEtB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QUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUM5QixvQkFBb0IsRUFDcEI7WUFDSSxLQUFLLEVBQUU7Z0JBQ0gsSUFBSTtnQkFDSixRQUFRLEVBQUUsS0FBSztnQkFDZixFQUFFLEVBQUUsVUFBVTthQUNqQjtTQUNKLENBQ0osQ0FBQztJQUNOLENBQUM7SUFFRCxrQkFBa0IsQ0FBQyxLQUE4QjtRQUM3QyxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxDQUM5QixvQkFBb0IsRUFDcEI7WUFDSSxLQUFLO1NBQ1IsQ0FDSixDQUFDO0lBQ04sQ0FBQztJQUVELGtCQUFrQixDQUFDLEVBQVU7UUFDekIsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FDOUIsb0JBQW9CLEVBQ3BCO1lBQ0ksRUFBRTtTQUNMLENBQ0osQ0FBQztJQUNOLENBQUM7Q0FDSiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgICBBZGRDdXN0b21lcnNUb0dyb3VwLFxyXG4gICAgQWRkTm90ZVRvQ3VzdG9tZXIsXHJcbiAgICBDcmVhdGVBZGRyZXNzSW5wdXQsXHJcbiAgICBDcmVhdGVDdXN0b21lcixcclxuICAgIENyZWF0ZUN1c3RvbWVyQWRkcmVzcyxcclxuICAgIENyZWF0ZUN1c3RvbWVyR3JvdXAsXHJcbiAgICBDcmVhdGVDdXN0b21lckdyb3VwSW5wdXQsXHJcbiAgICBDcmVhdGVDdXN0b21lcklucHV0LFxyXG4gICAgQ3VzdG9tZXJHcm91cExpc3RPcHRpb25zLFxyXG4gICAgQ3VzdG9tZXJMaXN0T3B0aW9ucyxcclxuICAgIERlbGV0ZUN1c3RvbWVyLFxyXG4gICAgRGVsZXRlQ3VzdG9tZXJBZGRyZXNzLFxyXG4gICAgRGVsZXRlQ3VzdG9tZXJHcm91cCxcclxuICAgIERlbGV0ZUN1c3RvbWVyTm90ZSxcclxuICAgIEdldEN1c3RvbWVyLFxyXG4gICAgR2V0Q3VzdG9tZXJHcm91cHMsXHJcbiAgICBHZXRDdXN0b21lckdyb3VwV2l0aEN1c3RvbWVycyxcclxuICAgIEdldEN1c3RvbWVySGlzdG9yeSxcclxuICAgIEdldEN1c3RvbWVyTGlzdCxcclxuICAgIEhpc3RvcnlFbnRyeUxpc3RPcHRpb25zLFxyXG4gICAgT3JkZXJMaXN0T3B0aW9ucyxcclxuICAgIFJlbW92ZUN1c3RvbWVyc0Zyb21Hcm91cCxcclxuICAgIFVwZGF0ZUFkZHJlc3NJbnB1dCxcclxuICAgIFVwZGF0ZUN1c3RvbWVyLFxyXG4gICAgVXBkYXRlQ3VzdG9tZXJBZGRyZXNzLFxyXG4gICAgVXBkYXRlQ3VzdG9tZXJHcm91cCxcclxuICAgIFVwZGF0ZUN1c3RvbWVyR3JvdXBJbnB1dCxcclxuICAgIFVwZGF0ZUN1c3RvbWVySW5wdXQsXHJcbiAgICBVcGRhdGVDdXN0b21lck5vdGUsXHJcbiAgICBVcGRhdGVDdXN0b21lck5vdGVJbnB1dCxcclxufSBmcm9tICcuLi8uLi9jb21tb24vZ2VuZXJhdGVkLXR5cGVzJztcclxuaW1wb3J0IHtcclxuICAgIEFERF9DVVNUT01FUlNfVE9fR1JPVVAsXHJcbiAgICBBRERfTk9URV9UT19DVVNUT01FUixcclxuICAgIENSRUFURV9DVVNUT01FUixcclxuICAgIENSRUFURV9DVVNUT01FUl9BRERSRVNTLFxyXG4gICAgQ1JFQVRFX0NVU1RPTUVSX0dST1VQLFxyXG4gICAgREVMRVRFX0NVU1RPTUVSLFxyXG4gICAgREVMRVRFX0NVU1RPTUVSX0FERFJFU1MsXHJcbiAgICBERUxFVEVfQ1VTVE9NRVJfR1JPVVAsXHJcbiAgICBERUxFVEVfQ1VTVE9NRVJfTk9URSxcclxuICAgIEdFVF9DVVNUT01FUixcclxuICAgIEdFVF9DVVNUT01FUl9HUk9VUFMsXHJcbiAgICBHRVRfQ1VTVE9NRVJfR1JPVVBfV0lUSF9DVVNUT01FUlMsXHJcbiAgICBHRVRfQ1VTVE9NRVJfSElTVE9SWSxcclxuICAgIEdFVF9DVVNUT01FUl9MSVNULFxyXG4gICAgUkVNT1ZFX0NVU1RPTUVSU19GUk9NX0dST1VQLFxyXG4gICAgVVBEQVRFX0NVU1RPTUVSLFxyXG4gICAgVVBEQVRFX0NVU1RPTUVSX0FERFJFU1MsXHJcbiAgICBVUERBVEVfQ1VTVE9NRVJfR1JPVVAsXHJcbiAgICBVUERBVEVfQ1VTVE9NRVJfTk9URSxcclxufSBmcm9tICcuLi9kZWZpbml0aW9ucy9jdXN0b21lci1kZWZpbml0aW9ucyc7XHJcblxyXG5pbXBvcnQgeyBCYXNlRGF0YVNlcnZpY2UgfSBmcm9tICcuL2Jhc2UtZGF0YS5zZXJ2aWNlJztcclxuXHJcbmV4cG9ydCBjbGFzcyBDdXN0b21lckRhdGFTZXJ2aWNlIHtcclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgYmFzZURhdGFTZXJ2aWNlOiBCYXNlRGF0YVNlcnZpY2UpIHt9XHJcblxyXG4gICAgZ2V0Q3VzdG9tZXJMaXN0KHRha2U6IG51bWJlciA9IDEwLCBza2lwOiBudW1iZXIgPSAwLCBmaWx0ZXJUZXJtPzogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgZmlsdGVyID0gZmlsdGVyVGVybVxyXG4gICAgICAgICAgICA/IHtcclxuICAgICAgICAgICAgICAgICAgZmlsdGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBlbWFpbEFkZHJlc3M6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluczogZmlsdGVyVGVybSxcclxuICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICA6IHt9O1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5xdWVyeTxHZXRDdXN0b21lckxpc3QuUXVlcnksIEdldEN1c3RvbWVyTGlzdC5WYXJpYWJsZXM+KFxyXG4gICAgICAgICAgICBHRVRfQ1VTVE9NRVJfTElTVCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgICAgIHRha2UsXHJcbiAgICAgICAgICAgICAgICAgICAgc2tpcCxcclxuICAgICAgICAgICAgICAgICAgICAuLi5maWx0ZXIsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q3VzdG9tZXIoaWQ6IHN0cmluZywgb3JkZXJMaXN0T3B0aW9ucz86IE9yZGVyTGlzdE9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UucXVlcnk8R2V0Q3VzdG9tZXIuUXVlcnksIEdldEN1c3RvbWVyLlZhcmlhYmxlcz4oR0VUX0NVU1RPTUVSLCB7XHJcbiAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICBvcmRlckxpc3RPcHRpb25zLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZUN1c3RvbWVyKGlucHV0OiBDcmVhdGVDdXN0b21lcklucHV0LCBwYXNzd29yZD86IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8Q3JlYXRlQ3VzdG9tZXIuTXV0YXRpb24sIENyZWF0ZUN1c3RvbWVyLlZhcmlhYmxlcz4oXHJcbiAgICAgICAgICAgIENSRUFURV9DVVNUT01FUixcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaW5wdXQsXHJcbiAgICAgICAgICAgICAgICBwYXNzd29yZCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUN1c3RvbWVyKGlucHV0OiBVcGRhdGVDdXN0b21lcklucHV0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxVcGRhdGVDdXN0b21lci5NdXRhdGlvbiwgVXBkYXRlQ3VzdG9tZXIuVmFyaWFibGVzPihcclxuICAgICAgICAgICAgVVBEQVRFX0NVU1RPTUVSLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZUN1c3RvbWVyKGlkOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPERlbGV0ZUN1c3RvbWVyLk11dGF0aW9uLCBEZWxldGVDdXN0b21lci5WYXJpYWJsZXM+KFxyXG4gICAgICAgICAgICBERUxFVEVfQ1VTVE9NRVIsXHJcbiAgICAgICAgICAgIHsgaWQgfSxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZUN1c3RvbWVyQWRkcmVzcyhjdXN0b21lcklkOiBzdHJpbmcsIGlucHV0OiBDcmVhdGVBZGRyZXNzSW5wdXQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPENyZWF0ZUN1c3RvbWVyQWRkcmVzcy5NdXRhdGlvbiwgQ3JlYXRlQ3VzdG9tZXJBZGRyZXNzLlZhcmlhYmxlcz4oXHJcbiAgICAgICAgICAgIENSRUFURV9DVVNUT01FUl9BRERSRVNTLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjdXN0b21lcklkLFxyXG4gICAgICAgICAgICAgICAgaW5wdXQsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVDdXN0b21lckFkZHJlc3MoaW5wdXQ6IFVwZGF0ZUFkZHJlc3NJbnB1dCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8VXBkYXRlQ3VzdG9tZXJBZGRyZXNzLk11dGF0aW9uLCBVcGRhdGVDdXN0b21lckFkZHJlc3MuVmFyaWFibGVzPihcclxuICAgICAgICAgICAgVVBEQVRFX0NVU1RPTUVSX0FERFJFU1MsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlucHV0LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlQ3VzdG9tZXJBZGRyZXNzKGlkOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPERlbGV0ZUN1c3RvbWVyQWRkcmVzcy5NdXRhdGlvbiwgRGVsZXRlQ3VzdG9tZXJBZGRyZXNzLlZhcmlhYmxlcz4oXHJcbiAgICAgICAgICAgIERFTEVURV9DVVNUT01FUl9BRERSRVNTLFxyXG4gICAgICAgICAgICB7IGlkIH0sXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVDdXN0b21lckdyb3VwKGlucHV0OiBDcmVhdGVDdXN0b21lckdyb3VwSW5wdXQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPENyZWF0ZUN1c3RvbWVyR3JvdXAuTXV0YXRpb24sIENyZWF0ZUN1c3RvbWVyR3JvdXAuVmFyaWFibGVzPihcclxuICAgICAgICAgICAgQ1JFQVRFX0NVU1RPTUVSX0dST1VQLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZUN1c3RvbWVyR3JvdXAoaW5wdXQ6IFVwZGF0ZUN1c3RvbWVyR3JvdXBJbnB1dCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8VXBkYXRlQ3VzdG9tZXJHcm91cC5NdXRhdGlvbiwgVXBkYXRlQ3VzdG9tZXJHcm91cC5WYXJpYWJsZXM+KFxyXG4gICAgICAgICAgICBVUERBVEVfQ1VTVE9NRVJfR1JPVVAsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlucHV0LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlQ3VzdG9tZXJHcm91cChpZDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxEZWxldGVDdXN0b21lckdyb3VwLk11dGF0aW9uLCBEZWxldGVDdXN0b21lckdyb3VwLlZhcmlhYmxlcz4oXHJcbiAgICAgICAgICAgIERFTEVURV9DVVNUT01FUl9HUk9VUCxcclxuICAgICAgICAgICAgeyBpZCB9LFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Q3VzdG9tZXJHcm91cExpc3Qob3B0aW9ucz86IEN1c3RvbWVyR3JvdXBMaXN0T3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5xdWVyeTxHZXRDdXN0b21lckdyb3Vwcy5RdWVyeSwgR2V0Q3VzdG9tZXJHcm91cHMuVmFyaWFibGVzPihcclxuICAgICAgICAgICAgR0VUX0NVU1RPTUVSX0dST1VQUyxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEN1c3RvbWVyR3JvdXBXaXRoQ3VzdG9tZXJzKGlkOiBzdHJpbmcsIG9wdGlvbnM6IEN1c3RvbWVyTGlzdE9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UucXVlcnk8XHJcbiAgICAgICAgICAgIEdldEN1c3RvbWVyR3JvdXBXaXRoQ3VzdG9tZXJzLlF1ZXJ5LFxyXG4gICAgICAgICAgICBHZXRDdXN0b21lckdyb3VwV2l0aEN1c3RvbWVycy5WYXJpYWJsZXNcclxuICAgICAgICA+KEdFVF9DVVNUT01FUl9HUk9VUF9XSVRIX0NVU1RPTUVSUywge1xyXG4gICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgb3B0aW9ucyxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRDdXN0b21lcnNUb0dyb3VwKGdyb3VwSWQ6IHN0cmluZywgY3VzdG9tZXJJZHM6IHN0cmluZ1tdKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxBZGRDdXN0b21lcnNUb0dyb3VwLk11dGF0aW9uLCBBZGRDdXN0b21lcnNUb0dyb3VwLlZhcmlhYmxlcz4oXHJcbiAgICAgICAgICAgIEFERF9DVVNUT01FUlNfVE9fR1JPVVAsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGdyb3VwSWQsXHJcbiAgICAgICAgICAgICAgICBjdXN0b21lcklkcyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZUN1c3RvbWVyc0Zyb21Hcm91cChncm91cElkOiBzdHJpbmcsIGN1c3RvbWVySWRzOiBzdHJpbmdbXSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8XHJcbiAgICAgICAgICAgIFJlbW92ZUN1c3RvbWVyc0Zyb21Hcm91cC5NdXRhdGlvbixcclxuICAgICAgICAgICAgUmVtb3ZlQ3VzdG9tZXJzRnJvbUdyb3VwLlZhcmlhYmxlc1xyXG4gICAgICAgID4oUkVNT1ZFX0NVU1RPTUVSU19GUk9NX0dST1VQLCB7XHJcbiAgICAgICAgICAgIGdyb3VwSWQsXHJcbiAgICAgICAgICAgIGN1c3RvbWVySWRzLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEN1c3RvbWVySGlzdG9yeShpZDogc3RyaW5nLCBvcHRpb25zPzogSGlzdG9yeUVudHJ5TGlzdE9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UucXVlcnk8R2V0Q3VzdG9tZXJIaXN0b3J5LlF1ZXJ5LCBHZXRDdXN0b21lckhpc3RvcnkuVmFyaWFibGVzPihcclxuICAgICAgICAgICAgR0VUX0NVU1RPTUVSX0hJU1RPUlksXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICAgICAgb3B0aW9ucyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZE5vdGVUb0N1c3RvbWVyKGN1c3RvbWVySWQ6IHN0cmluZywgbm90ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYmFzZURhdGFTZXJ2aWNlLm11dGF0ZTxBZGROb3RlVG9DdXN0b21lci5NdXRhdGlvbiwgQWRkTm90ZVRvQ3VzdG9tZXIuVmFyaWFibGVzPihcclxuICAgICAgICAgICAgQUREX05PVEVfVE9fQ1VTVE9NRVIsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlucHV0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm90ZSxcclxuICAgICAgICAgICAgICAgICAgICBpc1B1YmxpYzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGN1c3RvbWVySWQsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlQ3VzdG9tZXJOb3RlKGlucHV0OiBVcGRhdGVDdXN0b21lck5vdGVJbnB1dCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJhc2VEYXRhU2VydmljZS5tdXRhdGU8VXBkYXRlQ3VzdG9tZXJOb3RlLk11dGF0aW9uLCBVcGRhdGVDdXN0b21lck5vdGUuVmFyaWFibGVzPihcclxuICAgICAgICAgICAgVVBEQVRFX0NVU1RPTUVSX05PVEUsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlucHV0LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlQ3VzdG9tZXJOb3RlKGlkOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iYXNlRGF0YVNlcnZpY2UubXV0YXRlPERlbGV0ZUN1c3RvbWVyTm90ZS5NdXRhdGlvbiwgRGVsZXRlQ3VzdG9tZXJOb3RlLlZhcmlhYmxlcz4oXHJcbiAgICAgICAgICAgIERFTEVURV9DVVNUT01FUl9OT1RFLFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==