"use strict";(self.webpackChunk_vendure_admin_ui=self.webpackChunk_vendure_admin_ui||[]).push([[466],{62466:function(e,n,t){t.r(n),t.d(n,{LoginComponent:function(){return m},LoginGuard:function(){return b},LoginModule:function(){return Z},loginRoutes:function(){return x}});var r=t(83671),a=t(30464),o=t(16320),i=t(1707),s=t(51546),c=t(57890),l=t(54364),g=t(70325);function d(e,n){1&e&&(a.TgZ(0,"span"),a._uU(1,"-"),a.qZA())}function p(e,n){if(1&e&&(a.TgZ(0,"span"),a._uU(1),a.YNc(2,d,2,0,"span",12),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.hij("",e.brand," "),a.xp6(1),a.Q6J("ngIf",!e.hideVendureBranding||!e.hideVersion)}}function u(e,n){1&e&&(a.TgZ(0,"span"),a._uU(1,"vendure"),a.qZA())}function h(e,n){if(1&e&&(a.TgZ(0,"span"),a._uU(1),a.qZA()),2&e){const e=a.oxw();a.xp6(1),a.hij("v",e.version,"")}}class m{constructor(e,n){this.authService=e,this.router=n,this.username="",this.password="",this.rememberMe=!1,this.version=r.s5M,this.brand=(0,r.hq7)().brand,this.hideVendureBranding=(0,r.hq7)().hideVendureBranding,this.hideVersion=(0,r.hq7)().hideVersion}logIn(){this.errorMessage=void 0,this.authService.logIn(this.username,this.password,this.rememberMe).subscribe(e=>{switch(e.__typename){case"CurrentUser":const n=this.getRedirectRoute();this.router.navigateByUrl(n||"/");break;case"InvalidCredentialsError":case"NativeAuthStrategyError":this.errorMessage=e.message}})}getRedirectRoute(){let e;const n=new RegExp(`${r.ONw}=(.*)`);try{const t=window.location.search.match(n);t&&1<t.length&&(e=atob(decodeURIComponent(t[1])))}catch(t){}return e}}m.\u0275fac=function(e){return new(e||m)(a.Y36(r.e80),a.Y36(o.F0))},m.\u0275cmp=a.Xpm({type:m,selectors:[["vdr-login"]],decls:25,vars:24,consts:[[1,"login-wrapper"],[1,"login"],[1,"title"],["src","assets/logo-300px.png"],[1,"login-group"],["type","text","name","username","id","login_username",1,"username",3,"ngModel","placeholder","ngModelChange"],["name","password","type","password","id","login_password",1,"password",3,"ngModel","placeholder","ngModelChange"],[1,"login-error",3,"clrAlertType","clrAlertClosable"],[1,"alert-text"],["type","checkbox","clrCheckbox","","id","rememberme","name","rememberme",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[1,"version"],[4,"ngIf"]],template:function(e,n){1&e&&(a.TgZ(0,"div",0),a.TgZ(1,"form",1),a.TgZ(2,"label",2),a._UZ(3,"img",3),a.qZA(),a.TgZ(4,"div",4),a.TgZ(5,"input",5),a.NdJ("ngModelChange",function(e){return n.username=e}),a.ALo(6,"translate"),a.qZA(),a.TgZ(7,"input",6),a.NdJ("ngModelChange",function(e){return n.password=e}),a.ALo(8,"translate"),a.qZA(),a.TgZ(9,"clr-alert",7),a.TgZ(10,"clr-alert-item"),a.TgZ(11,"span",8),a._uU(12),a.qZA(),a.qZA(),a.qZA(),a.TgZ(13,"clr-checkbox-wrapper"),a.TgZ(14,"input",9),a.NdJ("ngModelChange",function(e){return n.rememberMe=e}),a.qZA(),a.TgZ(15,"label"),a._uU(16),a.ALo(17,"translate"),a.qZA(),a.qZA(),a.TgZ(18,"button",10),a.NdJ("click",function(){return n.logIn()}),a._uU(19),a.ALo(20,"translate"),a.qZA(),a.qZA(),a.TgZ(21,"div",11),a.YNc(22,p,3,2,"span",12),a.YNc(23,u,2,0,"span",12),a.YNc(24,h,2,1,"span",12),a.qZA(),a.qZA(),a.qZA()),2&e&&(a.xp6(5),a.Q6J("ngModel",n.username)("placeholder",a.lcZ(6,16,"common.username")),a.xp6(2),a.Q6J("ngModel",n.password)("placeholder",a.lcZ(8,18,"common.password")),a.xp6(2),a.ekj("visible",n.errorMessage),a.Q6J("clrAlertType","danger")("clrAlertClosable",!1),a.xp6(3),a.hij(" ",n.errorMessage," "),a.xp6(2),a.Q6J("ngModel",n.rememberMe),a.xp6(2),a.Oqu(a.lcZ(17,20,"common.remember-me")),a.xp6(2),a.Q6J("disabled",!n.username||!n.password),a.xp6(1),a.hij(" ",a.lcZ(20,22,"common.login")," "),a.xp6(3),a.Q6J("ngIf",n.brand),a.xp6(1),a.Q6J("ngIf",!n.hideVendureBranding),a.xp6(1),a.Q6J("ngIf",!n.hideVersion))},directives:[i._Y,i.JL,i.F,s.MgK,c.y,i.Fj,i.JJ,i.On,s.TIm,s.CyW,s.I9z,s.PEh,i.Wl,s.KKC,l.O5],pipes:[g.X$],styles:[".login-wrapper[_ngcontent-%COMP%]{background:var(--login-page-bg);background-size:auto;justify-content:center}.title[_ngcontent-%COMP%]{text-align:center}.version[_ngcontent-%COMP%]{flex:1;display:flex;align-items:flex-end;justify-content:center;color:var(--color-grey-300)}.version[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-left:5px}.login-error[_ngcontent-%COMP%]{max-height:0;overflow:hidden}.login-error.visible[_ngcontent-%COMP%]{max-height:46px;transition:max-height .2s;-webkit-animation:shake .82s cubic-bezier(.36,.07,.19,.97) both;animation:shake .82s cubic-bezier(.36,.07,.19,.97) both;-webkit-animation-delay:.2s;animation-delay:.2s;transform:translate(0);-webkit-backface-visibility:hidden;backface-visibility:hidden;perspective:1000px}@-webkit-keyframes shake{10%,90%{transform:translate(-1px)}20%,80%{transform:translate(2px)}30%,50%,70%{transform:translate(-4px)}40%,60%{transform:translate(4px)}}@keyframes shake{10%,90%{transform:translate(-1px)}20%,80%{transform:translate(2px)}30%,50%,70%{transform:translate(-4px)}40%,60%{transform:translate(4px)}}"]});var f=t(33927);class b{constructor(e,n){this.router=e,this.authService=n}canActivate(e){return this.authService.checkAuthenticatedStatus().pipe((0,f.U)(e=>(e&&this.router.navigate(["/"]),!e)))}}b.\u0275fac=function(e){return new(e||b)(a.LFG(o.F0),a.LFG(r.e80))},b.\u0275prov=a.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"});const x=[{path:"",component:m,pathMatch:"full",canActivate:[b]}];class Z{}Z.\u0275fac=function(e){return new(e||Z)},Z.\u0275mod=a.oAB({type:Z}),Z.\u0275inj=a.cJS({imports:[[r.m81,o.Bz.forChild(x)]]})}}]);
//# sourceMappingURL=466-es2015.694fabcc1052fbe99a29.js.map