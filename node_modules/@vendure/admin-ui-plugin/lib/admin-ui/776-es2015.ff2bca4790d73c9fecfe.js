"use strict";(self.webpackChunk_vendure_admin_ui=self.webpackChunk_vendure_admin_ui||[]).push([[776],{86776:function(e,t,s){s.r(t),s.d(t,{AddCustomerToGroupDialogComponent:function(){return J},AddressCardComponent:function(){return te},AddressDetailDialogComponent:function(){return Q},CustomerDetailComponent:function(){return _t},CustomerGroupDetailDialogComponent:function(){return Ft},CustomerGroupListComponent:function(){return Rt},CustomerGroupMemberListComponent:function(){return U},CustomerHistoryComponent:function(){return st},CustomerListComponent:function(){return Kt},CustomerModule:function(){return ss},CustomerResolver:function(){return zt},CustomerStatusLabelComponent:function(){return Te},SelectCustomerGroupDialogComponent:function(){return ve},customerBreadcrumb:function(){return ts},customerRoutes:function(){return es}});var r=s(76491),o=s(79902),i=s(33927),n=s(30464),c=s(83671),a=s(20309),l=s(1707),d=s(79441),u=s(61486),m=s(1143),p=s(83720),g=s(80639),h=s(14921),f=s(22663),Z=s(16320),v=s(57890),b=s(20365),A=s(30901),x=s(28899),C=s(70325),y=s(54364),T=s(97388);const _=function(e){return["/customer","customers",e]};function q(e,t){if(1&e&&(n.TgZ(0,"td",3),n._uU(1),n.qZA(),n.TgZ(2,"td",3),n._uU(3),n.qZA(),n.TgZ(4,"td",4),n._UZ(5,"vdr-table-row-action",5),n.ALo(6,"translate"),n.qZA()),2&e){const e=t.item;n.xp6(1),n.lnq(" ",e.title," ",e.firstName," ",e.lastName," "),n.xp6(2),n.Oqu(e.emailAddress),n.xp6(2),n.Q6J("label",n.lcZ(6,6,"common.edit"))("linkTo",n.VKq(8,_,e.id))}}class U{constructor(e,t){this.router=e,this.dataService=t,this.selectedMemberIds=[],this.selectionChange=new n.vpe,this.fetchParamsChange=new n.vpe,this.filterTermControl=new l.NI(""),this.refresh$=new r.X(!0),this.destroy$=new d.xQ,this.isMemberSelected=e=>-1<this.selectedMemberIds.indexOf(e.id)}ngOnInit(){this.membersCurrentPage$=this.route.paramMap.pipe((0,i.U)(e=>e.get("membersPage")),(0,i.U)(e=>e?+e:1),(0,m.O)(1),(0,p.x)()),this.membersItemsPerPage$=this.route.paramMap.pipe((0,i.U)(e=>e.get("membersPerPage")),(0,i.U)(e=>e?+e:10),(0,m.O)(10),(0,p.x)());const e=this.filterTermControl.valueChanges.pipe((0,g.b)(250),(0,h.b)(()=>this.setContentsPageNumber(1)),(0,m.O)(""));(0,u.aj)(this.membersCurrentPage$,this.membersItemsPerPage$,e,this.refresh$).pipe((0,f.R)(this.destroy$)).subscribe(([e,t,s])=>{const r=t,o=(e-1)*t;this.fetchParamsChange.emit({filterTerm:s,skip:o,take:r})})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setContentsPageNumber(e){this.setParam("membersPage",e)}setContentsItemsPerPage(e){this.setParam("membersPerPage",e)}refresh(){this.refresh$.next(!0)}setParam(e,t){this.router.navigate(["./",Object.assign(Object.assign({},this.route.snapshot.params),{[e]:t})],{relativeTo:this.route,queryParamsHandling:"merge"})}areAllSelected(){return!!this.members&&this.selectedMemberIds.length===this.members.length}toggleSelectAll(){this.areAllSelected()?this.selectionChange.emit([]):this.selectionChange.emit(this.members.map(e=>e.id))}toggleSelectMember(e){this.selectedMemberIds.includes(e.id)?this.selectionChange.emit(this.selectedMemberIds.filter(t=>t!==e.id)):this.selectionChange.emit([...this.selectedMemberIds,e.id])}}U.\u0275fac=function(e){return new(e||U)(n.Y36(Z.F0),n.Y36(c.DoR))},U.\u0275cmp=n.Xpm({type:U,selectors:[["vdr-customer-group-member-list"]],inputs:{members:"members",totalItems:"totalItems",route:"route",selectedMemberIds:"selectedMemberIds"},outputs:{selectionChange:"selectionChange",fetchParamsChange:"fetchParamsChange"},decls:14,vars:24,consts:[["type","text","name","searchTerm",1,"search-input",3,"formControl","placeholder"],[3,"items","itemsPerPage","totalItems","currentPage","allSelected","isRowSelectedFn","pageChange","itemsPerPageChange","rowSelectChange","allSelectChange"],[3,"expand"],[1,"left","align-middle"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"]],template:function(e,t){1&e&&(n._UZ(0,"input",0),n.ALo(1,"translate"),n.TgZ(2,"vdr-data-table",1),n.NdJ("pageChange",function(e){return t.setContentsPageNumber(e)})("itemsPerPageChange",function(e){return t.setContentsItemsPerPage(e)})("rowSelectChange",function(e){return t.toggleSelectMember(e)})("allSelectChange",function(){return t.toggleSelectAll()}),n.ALo(3,"async"),n.ALo(4,"async"),n.ALo(5,"hasPermission"),n.TgZ(6,"vdr-dt-column",2),n._uU(7),n.ALo(8,"translate"),n.qZA(),n.TgZ(9,"vdr-dt-column",2),n._uU(10),n.ALo(11,"translate"),n.qZA(),n._UZ(12,"vdr-dt-column"),n.YNc(13,q,7,10,"ng-template"),n.qZA()),2&e&&(n.Q6J("formControl",t.filterTermControl)("placeholder",n.lcZ(1,12,"customer.search-customers-by-email")),n.xp6(2),n.Q6J("items",t.members)("itemsPerPage",n.lcZ(3,14,t.membersItemsPerPage$))("totalItems",t.totalItems)("currentPage",n.lcZ(4,16,t.membersCurrentPage$))("allSelected",t.areAllSelected())("isRowSelectedFn",n.lcZ(5,18,"UpdateCustomerGroup")&&t.isMemberSelected),n.xp6(4),n.Q6J("expand",!0),n.xp6(1),n.Oqu(n.lcZ(8,20,"customer.name")),n.xp6(2),n.Q6J("expand",!0),n.xp6(1),n.Oqu(n.lcZ(11,22,"customer.email-address")))},directives:[v.y,l.Fj,l.JJ,l.oH,b.Q,A.E,x.v],pipes:[C.X$,y.Ov,T.j],styles:[""],changeDetection:0});var N=s(98318);const w=function(e){return{groupName:e}};function I(e,t){if(1&e&&(n._uU(0),n.ALo(1,"translate")),2&e){const e=n.oxw();n.hij(" ",n.xi3(1,1,"customer.add-customers-to-group-with-name",n.VKq(4,w,e.group.name)),"\n")}}const O=function(e){return{count:e}};function S(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",3),n.NdJ("click",function(){return n.CHM(e),n.oxw().cancel()}),n._uU(1),n.ALo(2,"translate"),n.qZA(),n.TgZ(3,"button",4),n.NdJ("click",function(){return n.CHM(e),n.oxw().add()}),n._uU(4),n.ALo(5,"translate"),n.qZA()}if(2&e){const e=n.oxw();n.xp6(1),n.Oqu(n.lcZ(2,3,"common.cancel")),n.xp6(2),n.Q6J("disabled",!e.selectedCustomerIds.length),n.xp6(1),n.hij(" ",n.xi3(5,5,"customer.add-customers-to-group-with-count",n.VKq(8,O,e.selectedCustomerIds.length))," ")}}class J{constructor(e){this.dataService=e,this.selectedCustomerIds=[],this.fetchGroupMembers$=new r.X({skip:0,take:10,filterTerm:""})}ngOnInit(){const e=this.fetchGroupMembers$.pipe((0,o.w)(({skip:e,take:t,filterTerm:s})=>this.dataService.customer.getCustomerList(t,e,s).mapStream(e=>e.customers)));this.customers$=e.pipe((0,i.U)(e=>e.items)),this.customersTotal$=e.pipe((0,i.U)(e=>e.totalItems))}cancel(){this.resolveWith()}add(){this.resolveWith(this.selectedCustomerIds)}}J.\u0275fac=function(e){return new(e||J)(n.Y36(c.DoR))},J.\u0275cmp=n.Xpm({type:J,selectors:[["vdr-add-customer-to-group-dialog"]],decls:5,vars:8,consts:[["vdrDialogTitle",""],[3,"members","totalItems","route","selectedMemberIds","fetchParamsChange","selectionChange"],["vdrDialogButtons",""],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(n.YNc(0,I,2,6,"ng-template",0),n.TgZ(1,"vdr-customer-group-member-list",1),n.NdJ("fetchParamsChange",function(e){return t.fetchGroupMembers$.next(e)})("selectionChange",function(e){return t.selectedCustomerIds=e}),n.ALo(2,"async"),n.ALo(3,"async"),n.qZA(),n.YNc(4,S,6,10,"ng-template",2)),2&e&&(n.xp6(1),n.Q6J("members",n.lcZ(2,4,t.customers$))("totalItems",n.lcZ(3,6,t.customersTotal$))("route",t.route)("selectedMemberIds",t.selectedCustomerIds))},directives:[a.q,U,N.n],pipes:[y.Ov,C.X$],styles:[""],changeDetection:0});var F=s(9170),L=s(53466),D=s(1480);function P(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&e){const e=t.ngIf;n.xp6(1),n.hij("",e,",")}}function M(e,t){if(1&e&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&e){const e=t.ngIf;n.xp6(1),n.hij(" ",e,"")}}function k(e,t){if(1&e&&(n.YNc(0,P,2,1,"span",3),n.YNc(1,M,2,1,"span",3)),2&e){const e=n.oxw();let t,s;n.Q6J("ngIf",null==(t=e.addressForm.get("streetLine1"))?null:t.value),n.xp6(1),n.Q6J("ngIf",null==(s=e.addressForm.get("countryCode"))?null:s.value)}}function E(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",4),n.NdJ("click",function(){return n.CHM(e),n.oxw().cancel()}),n._uU(1),n.ALo(2,"translate"),n.qZA(),n.TgZ(3,"button",5),n.NdJ("click",function(){return n.CHM(e),n.oxw().save()}),n._uU(4),n.ALo(5,"translate"),n.qZA()}if(2&e){const e=n.oxw();n.xp6(1),n.Oqu(n.lcZ(2,3,"common.cancel")),n.xp6(2),n.Q6J("disabled",!e.addressForm.valid||!e.addressForm.touched),n.xp6(1),n.hij(" ",n.lcZ(5,5,"common.update")," ")}}class Q{constructor(e){this.changeDetector=e,this.availableCountries=[]}ngOnInit(){this.addressForm.valueChanges.subscribe(()=>this.changeDetector.markForCheck())}cancel(){this.resolveWith()}save(){this.resolveWith(this.addressForm)}}Q.\u0275fac=function(e){return new(e||Q)(n.Y36(n.sBO))},Q.\u0275cmp=n.Xpm({type:Q,selectors:[["vdr-address-detail-dialog"]],decls:3,vars:3,consts:[["vdrDialogTitle",""],[3,"formGroup","availableCountries","customFields"],["vdrDialogButtons",""],[4,"ngIf"],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(n.YNc(0,k,2,2,"ng-template",0),n._UZ(1,"vdr-address-form",1),n.YNc(2,E,6,7,"ng-template",2)),2&e&&(n.xp6(1),n.Q6J("formGroup",t.addressForm)("availableCountries",t.availableCountries)("customFields",t.customFields))},directives:[a.q,D.C,l.JL,l.sg,N.n,y.O5],pipes:[C.X$],styles:["clr-input-container[_ngcontent-%COMP%]{margin-bottom:12px}"],changeDetection:0});var $=s(99667),Y=s(33146),G=s(74447),j=s(51546),R=s(30735),B=s(41519),H=s(28854),V=s(15111);function X(e,t){if(1&e&&(n.TgZ(0,"span",13),n._uU(1),n.qZA()),2&e){const e=n.oxw().ngIf;n.xp6(1),n.hij("",e.streetLine1,",")}}function W(e,t){1&e&&(n.TgZ(0,"vdr-chip",14),n._UZ(1,"clr-icon",15),n._uU(2),n.ALo(3,"translate"),n.qZA()),2&e&&(n.xp6(2),n.hij(" ",n.lcZ(3,1,"customer.default-shipping-address")," "))}function K(e,t){1&e&&(n.TgZ(0,"vdr-chip",14),n._UZ(1,"clr-icon",16),n._uU(2),n.ALo(3,"translate"),n.qZA()),2&e&&(n.xp6(2),n.hij(" ",n.lcZ(3,1,"customer.default-billing-address")," "))}function z(e,t){if(1&e){const e=n.EpF();n.ynx(0),n.TgZ(1,"button",17),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).editAddress()}),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.TgZ(4,"vdr-dropdown"),n.TgZ(5,"button",18),n._uU(6),n.ALo(7,"translate"),n._UZ(8,"clr-icon",19),n.qZA(),n.TgZ(9,"vdr-dropdown-menu"),n.TgZ(10,"button",20),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).setAsDefaultShippingAddress()}),n._uU(11),n.ALo(12,"translate"),n.qZA(),n.TgZ(13,"button",20),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).setAsDefaultBillingAddress()}),n._uU(14),n.ALo(15,"translate"),n.qZA(),n._UZ(16,"div",21),n.TgZ(17,"button",22),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).delete()}),n._UZ(18,"clr-icon",23),n._uU(19),n.ALo(20,"translate"),n.qZA(),n.qZA(),n.qZA(),n.BQk()}if(2&e){const e=n.oxw(2);n.xp6(2),n.hij(" ",n.lcZ(3,7,"common.edit")," "),n.xp6(4),n.hij(" ",n.lcZ(7,9,"common.more")," "),n.xp6(4),n.Q6J("disabled",e.isDefaultShipping),n.xp6(1),n.hij(" ",n.lcZ(12,11,"customer.set-as-default-shipping-address")," "),n.xp6(2),n.Q6J("disabled",e.isDefaultBilling),n.xp6(1),n.hij(" ",n.lcZ(15,13,"customer.set-as-default-billing-address")," "),n.xp6(5),n.hij(" ",n.lcZ(20,15,"common.delete")," ")}}function ee(e,t){if(1&e&&(n.TgZ(0,"div",1),n.TgZ(1,"div",2),n.TgZ(2,"div",3),n.YNc(3,X,2,1,"span",4),n._uU(4),n.qZA(),n.TgZ(5,"div",5),n.YNc(6,W,4,3,"vdr-chip",6),n.YNc(7,K,4,3,"vdr-chip",6),n.qZA(),n.qZA(),n.TgZ(8,"div",7),n.TgZ(9,"div",8),n._UZ(10,"vdr-formatted-address",9),n.qZA(),n.qZA(),n.TgZ(11,"div",10),n._UZ(12,"vdr-entity-info",11),n.YNc(13,z,21,17,"ng-container",12),n.qZA(),n.qZA()),2&e){const e=t.ngIf,s=n.oxw();n.xp6(3),n.Q6J("ngIf",e.streetLine1),n.xp6(1),n.hij(" ",e.countryCode," "),n.xp6(2),n.Q6J("ngIf",s.isDefaultShipping),n.xp6(1),n.Q6J("ngIf",s.isDefaultBilling),n.xp6(3),n.Q6J("address",e),n.xp6(2),n.Q6J("entity",e),n.xp6(1),n.Q6J("ngIf",s.editable)}}class te{constructor(e,t){this.modalService=e,this.changeDetector=t,this.availableCountries=[],this.editable=!0,this.setAsDefaultShipping=new n.vpe,this.setAsDefaultBilling=new n.vpe,this.deleteAddress=new n.vpe,this.dataDependenciesPopulated=new r.X(!1)}ngOnInit(){this.addressForm.get("streetLine1").value||this.dataDependenciesPopulated.pipe((0,F.h)(e=>e),(0,L.q)(1)).subscribe(()=>{this.editAddress()})}ngOnChanges(e){null!=this.customFields&&null!=this.availableCountries&&this.dataDependenciesPopulated.next(!0)}getCountryName(e){if(!this.availableCountries)return"";const t=this.availableCountries.find(t=>t.code===e);return t?t.name:""}setAsDefaultBillingAddress(){this.setAsDefaultBilling.emit(this.addressForm.value.id),this.addressForm.markAsDirty()}setAsDefaultShippingAddress(){this.setAsDefaultShipping.emit(this.addressForm.value.id),this.addressForm.markAsDirty()}delete(){this.deleteAddress.emit(this.addressForm.value.id),this.addressForm.markAsDirty()}editAddress(){this.modalService.fromComponent(Q,{locals:{addressForm:this.addressForm,customFields:this.customFields,availableCountries:this.availableCountries},size:"md",closable:!0}).subscribe(()=>{this.changeDetector.markForCheck()})}}te.\u0275fac=function(e){return new(e||te)(n.Y36(c.Z7U),n.Y36(n.sBO))},te.\u0275cmp=n.Xpm({type:te,selectors:[["vdr-address-card"]],inputs:{addressForm:"addressForm",customFields:"customFields",availableCountries:"availableCountries",isDefaultBilling:"isDefaultBilling",isDefaultShipping:"isDefaultShipping",editable:"editable"},outputs:{setAsDefaultShipping:"setAsDefaultShipping",setAsDefaultBilling:"setAsDefaultBilling",deleteAddress:"deleteAddress"},features:[n.TTD],decls:1,vars:1,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"card-header"],[1,"address-title"],["class","street-line",4,"ngIf"],[1,"default-controls"],["class","is-default p8",4,"ngIf"],[1,"card-block"],[1,"card-text"],[3,"address"],[1,"card-footer"],[3,"entity"],[4,"ngIf"],[1,"street-line"],[1,"is-default","p8"],["shape","truck"],["shape","credit-card"],[1,"btn","btn-sm","btn-link",3,"click"],["type","button","vdrDropdownTrigger","",1,"btn","btn-sm","btn-link"],["shape","caret down"],["vdrDropdownItem","",1,"button",3,"disabled","click"],[1,"dropdown-divider"],["type","button","vdrDropdownItem","",1,"delete-button",3,"click"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&n.YNc(0,ee,14,7,"div",0),2&e&&n.Q6J("ngIf",t.addressForm.value)},directives:[y.O5,$.b,Y.V,G.Y,j.qvL,R.J,B.U,H.N,V.H],pipes:[C.X$],styles:["[_nghost-%COMP%]{display:block;max-width:360px}clr-input-container[_ngcontent-%COMP%]{margin-bottom:12px}.defaul-controls[_ngcontent-%COMP%]{display:flex}.is-default[_ngcontent-%COMP%]{margin:0;color:var(--color-success-500)}"],changeDetection:0});var se=s(3786),re=s(30724),oe=s(87187),ie=s(42720),ne=s(30400),ce=s(8117),ae=s(92597),le=s(89919);var de=s(85816),ue=s(56816),me=s(36868);function pe(e,t){1&e&&(n._uU(0),n.ALo(1,"translate")),2&e&&n.hij(" ",n.lcZ(1,1,"customer.add-customer-to-group"),"\n")}function ge(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"span",5),n.NdJ("click",function(){const t=n.CHM(e),s=t.item;return t.clear(s)}),n._uU(1," \xd7 "),n.qZA(),n.TgZ(2,"vdr-chip",6),n._uU(3),n.qZA()}if(2&e){const e=t.item;n.xp6(2),n.Q6J("colorFrom",e.id),n.xp6(1),n.Oqu(e.name)}}function he(e,t){if(1&e&&(n.TgZ(0,"vdr-chip",6),n._uU(1),n.qZA()),2&e){const e=t.item;n.Q6J("colorFrom",e.id),n.xp6(1),n.Oqu(e.name)}}const fe=function(e){return{count:e}};function Ze(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",7),n.NdJ("click",function(){return n.CHM(e),n.oxw().cancel()}),n._uU(1),n.ALo(2,"translate"),n.qZA(),n.TgZ(3,"button",8),n.NdJ("click",function(){return n.CHM(e),n.oxw().add()}),n._uU(4),n.ALo(5,"translate"),n.qZA()}if(2&e){const e=n.oxw();n.xp6(1),n.Oqu(n.lcZ(2,3,"common.cancel")),n.xp6(2),n.Q6J("disabled",!e.selectedGroupIds.length),n.xp6(1),n.hij(" ",n.xi3(5,5,"customer.add-customer-to-groups-with-count",n.VKq(8,fe,e.selectedGroupIds.length))," ")}}class ve{constructor(e){this.dataService=e,this.selectedGroupIds=[]}ngOnInit(){this.groups$=this.dataService.customer.getCustomerGroupList().mapStream(e=>e.customerGroups.items)}cancel(){this.resolveWith()}add(){this.resolveWith(this.selectedGroupIds)}}ve.\u0275fac=function(e){return new(e||ve)(n.Y36(c.DoR))},ve.\u0275cmp=n.Xpm({type:ve,selectors:[["vdr-select-customer-group-dialog"]],decls:6,vars:8,consts:[["vdrDialogTitle",""],["appendTo","body","bindValue","id",3,"items","addTag","multiple","ngModel","clearable","searchable","ngModelChange"],["ng-label-tmp",""],["ng-option-tmp",""],["vdrDialogButtons",""],["aria-hidden","true",1,"ng-value-icon","left",3,"click"],[3,"colorFrom"],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(n.YNc(0,pe,2,3,"ng-template",0),n.TgZ(1,"ng-select",1),n.NdJ("ngModelChange",function(e){return t.selectedGroupIds=e}),n.ALo(2,"async"),n.YNc(3,ge,4,2,"ng-template",2),n.YNc(4,he,2,2,"ng-template",3),n.qZA(),n.YNc(5,Ze,6,10,"ng-template",4)),2&e&&(n.xp6(1),n.Q6J("items",n.lcZ(2,6,t.groups$))("addTag",!1)("multiple",!0)("ngModel",t.selectedGroupIds)("clearable",!0)("searchable",!1))},directives:[a.q,me.w9,l.JJ,l.On,me.bb,me.Z2,N.n,G.Y],pipes:[y.Ov,C.X$],styles:[""],changeDetection:0});var be=s(27346);function Ae(e,t){1&e&&(n.ynx(0),n._UZ(1,"clr-icon",1),n._uU(2),n.ALo(3,"translate"),n.BQk()),2&e&&(n.xp6(2),n.hij(" ",n.lcZ(3,1,"customer.verified")," "))}function xe(e,t){1&e&&(n.ynx(0),n._UZ(1,"clr-icon",2),n._uU(2),n.ALo(3,"translate"),n.BQk()),2&e&&(n.xp6(2),n.hij(" ",n.lcZ(3,1,"customer.registered")," "))}function Ce(e,t){if(1&e&&(n.TgZ(0,"vdr-chip"),n.YNc(1,Ae,4,3,"ng-container",0),n.YNc(2,xe,4,3,"ng-container",0),n.qZA()),2&e){const e=n.oxw();n.xp6(1),n.Q6J("ngIf",null==e.customer.user?null:e.customer.user.verified),n.xp6(1),n.Q6J("ngIf",!(null!=e.customer.user&&e.customer.user.verified))}}function ye(e,t){1&e&&(n.TgZ(0,"vdr-chip"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"customer.guest")))}class Te{}Te.\u0275fac=function(e){return new(e||Te)},Te.\u0275cmp=n.Xpm({type:Te,selectors:[["vdr-customer-status-label"]],inputs:{customer:"customer"},decls:2,vars:2,consts:[[4,"ngIf"],["shape","check-circle",1,"verified-user-icon"],["shape","check-circle",1,"registered-user-icon"]],template:function(e,t){1&e&&(n.YNc(0,Ce,3,2,"vdr-chip",0),n.YNc(1,ye,3,3,"vdr-chip",0)),2&e&&(n.Q6J("ngIf",null==t.customer.user?null:t.customer.user.id),n.xp6(1),n.Q6J("ngIf",!(null!=t.customer.user&&t.customer.user.id)))},directives:[y.O5,G.Y,j.qvL],pipes:[C.X$],styles:[".registered-user-icon[_ngcontent-%COMP%]{color:var(--color-grey-300)}.verified-user-icon[_ngcontent-%COMP%]{color:var(--color-success-500)}"],changeDetection:0});var _e=s(38276),qe=s(34652),Ue=s(82505),Ne=s(59416),we=s(50837),Ie=s(82355),Oe=s(64664),Se=s(2702),Je=s(87368);function Fe(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"vdr-timeline-entry",4),n.TgZ(1,"div",5),n.TgZ(2,"textarea",6),n.NdJ("ngModelChange",function(t){n.CHM(e);return n.oxw().note=t}),n.qZA(),n.TgZ(3,"button",7),n.NdJ("click",function(){return n.CHM(e),n.oxw().addNoteToCustomer()}),n._uU(4),n.ALo(5,"translate"),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(2),n.Q6J("ngModel",e.note),n.xp6(1),n.Q6J("disabled",!e.note),n.xp6(1),n.hij(" ",n.lcZ(5,3,"order.add-note")," ")}}function Le(e,t){1&e&&(n.ynx(0),n._uU(1),n.ALo(2,"translate"),n.BQk()),2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"customer.history-using-native-auth-strategy")," "))}const De=function(e){return{strategy:e}};function Pe(e,t){if(1&e&&(n._uU(0),n.ALo(1,"translate")),2&e){const e=n.oxw(2).$implicit;n.hij(" ",n.xi3(1,1,"customer.history-using-external-auth-strategy",n.VKq(4,De,e.data.strategy))," ")}}function Me(e,t){if(1&e&&(n.ynx(0),n.TgZ(1,"div",11),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.YNc(4,Le,3,3,"ng-container",12),n.YNc(5,Pe,2,6,"ng-template",null,13,n.W1O),n.BQk()),2&e){const e=n.MAs(6),t=n.oxw().$implicit;n.xp6(2),n.hij(" ",n.lcZ(3,3,"customer.history-customer-registered")," "),n.xp6(2),n.Q6J("ngIf","native"===t.data.strategy)("ngIfElse",e)}}function ke(e,t){1&e&&(n.ynx(0),n._uU(1),n.ALo(2,"translate"),n.BQk()),2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"customer.history-using-native-auth-strategy")," "))}function Ee(e,t){if(1&e&&(n._uU(0),n.ALo(1,"translate")),2&e){const e=n.oxw(2).$implicit;n.hij(" ",n.xi3(1,1,"customer.history-using-external-auth-strategy",n.VKq(4,De,e.data.strategy))," ")}}function Qe(e,t){if(1&e&&(n.ynx(0),n.TgZ(1,"div",11),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.YNc(4,ke,3,3,"ng-container",12),n.YNc(5,Ee,2,6,"ng-template",null,13,n.W1O),n.BQk()),2&e){const e=n.MAs(6),t=n.oxw().$implicit;n.xp6(2),n.hij(" ",n.lcZ(3,3,"customer.history-customer-verified")," "),n.xp6(2),n.Q6J("ngIf","native"===t.data.strategy)("ngIfElse",e)}}function $e(e,t){if(1&e&&(n.ynx(0),n.TgZ(1,"div",14),n._uU(2),n.ALo(3,"translate"),n.TgZ(4,"vdr-history-entry-detail"),n._UZ(5,"vdr-object-tree",15),n.qZA(),n.qZA(),n.BQk()),2&e){const e=n.oxw().$implicit;n.xp6(2),n.hij(" ",n.lcZ(3,2,"customer.history-customer-detail-updated")," "),n.xp6(3),n.Q6J("value",e.data.input)}}const Ye=function(e){return{groupName:e}};function Ge(e,t){if(1&e&&(n.ynx(0),n._uU(1),n.ALo(2,"translate"),n.BQk()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.hij(" ",n.xi3(2,1,"customer.history-customer-added-to-group",n.VKq(4,Ye,e.data.groupName))," ")}}function je(e,t){if(1&e&&(n.ynx(0),n._uU(1),n.ALo(2,"translate"),n.BQk()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.hij(" ",n.xi3(2,1,"customer.history-customer-removed-from-group",n.VKq(4,Ye,e.data.groupName))," ")}}function Re(e,t){if(1&e&&(n.ynx(0),n._uU(1),n.ALo(2,"translate"),n.TgZ(3,"div",14),n.TgZ(4,"div",16),n._uU(5),n.qZA(),n.qZA(),n.BQk()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.hij(" ",n.lcZ(2,2,"customer.history-customer-address-created")," "),n.xp6(4),n.Oqu(e.data.address)}}function Be(e,t){if(1&e&&(n.ynx(0),n._uU(1),n.ALo(2,"translate"),n.TgZ(3,"div",14),n.TgZ(4,"div",16),n._uU(5),n.qZA(),n.TgZ(6,"vdr-history-entry-detail"),n._UZ(7,"vdr-object-tree",15),n.qZA(),n.qZA(),n.BQk()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.hij(" ",n.lcZ(2,3,"customer.history-customer-address-updated")," "),n.xp6(4),n.Oqu(e.data.address),n.xp6(2),n.Q6J("value",e.data.input)}}function He(e,t){if(1&e&&(n.ynx(0),n._uU(1),n.ALo(2,"translate"),n.TgZ(3,"div",16),n._uU(4),n.qZA(),n.BQk()),2&e){const e=n.oxw().$implicit;n.xp6(1),n.hij(" ",n.lcZ(2,2,"customer.history-customer-address-deleted")," "),n.xp6(3),n.Oqu(e.data.address)}}function Ve(e,t){1&e&&(n.ynx(0),n._uU(1),n.ALo(2,"translate"),n.BQk()),2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"customer.history-customer-password-updated")," "))}function Xe(e,t){1&e&&(n.ynx(0),n._uU(1),n.ALo(2,"translate"),n.BQk()),2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"customer.history-customer-password-reset-requested")," "))}function We(e,t){1&e&&(n.ynx(0),n._uU(1),n.ALo(2,"translate"),n.BQk()),2&e&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"customer.history-customer-password-reset-verified")," "))}function Ke(e,t){if(1&e&&(n.ynx(0),n.TgZ(1,"div",14),n._uU(2),n.ALo(3,"translate"),n.TgZ(4,"vdr-history-entry-detail"),n.TgZ(5,"vdr-labeled-data",17),n.ALo(6,"translate"),n._uU(7),n.qZA(),n.TgZ(8,"vdr-labeled-data",17),n.ALo(9,"translate"),n._uU(10),n.qZA(),n.qZA(),n.qZA(),n.BQk()),2&e){const e=n.oxw().$implicit;n.xp6(2),n.hij(" ",n.lcZ(3,5,"customer.history-customer-email-update-requested")," "),n.xp6(3),n.Q6J("label",n.lcZ(6,7,"customer.old-email-address")),n.xp6(2),n.Oqu(e.data.oldEmailAddress),n.xp6(1),n.Q6J("label",n.lcZ(9,9,"customer.new-email-address")),n.xp6(2),n.Oqu(e.data.newEmailAddress)}}function ze(e,t){if(1&e&&(n.ynx(0),n.TgZ(1,"div",14),n._uU(2),n.ALo(3,"translate"),n.TgZ(4,"vdr-history-entry-detail"),n.TgZ(5,"vdr-labeled-data",17),n.ALo(6,"translate"),n._uU(7),n.qZA(),n.TgZ(8,"vdr-labeled-data",17),n.ALo(9,"translate"),n._uU(10),n.qZA(),n.qZA(),n.qZA(),n.BQk()),2&e){const e=n.oxw().$implicit;n.xp6(2),n.hij(" ",n.lcZ(3,5,"customer.history-customer-email-update-verified")," "),n.xp6(3),n.Q6J("label",n.lcZ(6,7,"customer.old-email-address")),n.xp6(2),n.Oqu(e.data.oldEmailAddress),n.xp6(1),n.Q6J("label",n.lcZ(9,9,"customer.new-email-address")),n.xp6(2),n.Oqu(e.data.newEmailAddress)}}function et(e,t){if(1&e){const e=n.EpF();n.ynx(0),n.TgZ(1,"div",14),n.TgZ(2,"div",18),n._uU(3),n.qZA(),n._UZ(4,"div",19),n.TgZ(5,"vdr-dropdown"),n.TgZ(6,"button",20),n._UZ(7,"clr-icon",21),n.qZA(),n.TgZ(8,"vdr-dropdown-menu",22),n.TgZ(9,"button",23),n.NdJ("click",function(){n.CHM(e);const t=n.oxw().$implicit;return n.oxw().updateNote.emit(t)}),n.ALo(10,"hasPermission"),n._UZ(11,"clr-icon",24),n._uU(12),n.ALo(13,"translate"),n.qZA(),n._UZ(14,"div",25),n.TgZ(15,"button",23),n.NdJ("click",function(){n.CHM(e);const t=n.oxw().$implicit;return n.oxw().deleteNote.emit(t)}),n.ALo(16,"hasPermission"),n._UZ(17,"clr-icon",26),n._uU(18),n.ALo(19,"translate"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.BQk()}if(2&e){const e=n.oxw().$implicit;n.xp6(3),n.hij(" ",e.data.note," "),n.xp6(6),n.Q6J("disabled",!n.lcZ(10,5,"UpdateCustomer")),n.xp6(3),n.hij(" ",n.lcZ(13,7,"common.edit")," "),n.xp6(3),n.Q6J("disabled",!n.lcZ(16,9,"UpdateCustomer")),n.xp6(3),n.hij(" ",n.lcZ(19,11,"common.delete")," ")}}function tt(e,t){if(1&e&&(n.TgZ(0,"vdr-timeline-entry",8),n.ynx(1,9),n.YNc(2,Me,7,5,"ng-container",10),n.YNc(3,Qe,7,5,"ng-container",10),n.YNc(4,$e,6,4,"ng-container",10),n.YNc(5,Ge,3,6,"ng-container",10),n.YNc(6,je,3,6,"ng-container",10),n.YNc(7,Re,6,4,"ng-container",10),n.YNc(8,Be,8,5,"ng-container",10),n.YNc(9,He,5,4,"ng-container",10),n.YNc(10,Ve,3,3,"ng-container",10),n.YNc(11,Xe,3,3,"ng-container",10),n.YNc(12,We,3,3,"ng-container",10),n.YNc(13,Ke,11,11,"ng-container",10),n.YNc(14,ze,11,11,"ng-container",10),n.YNc(15,et,20,13,"ng-container",10),n.BQk(),n.qZA()),2&e){const e=t.$implicit,s=n.oxw();n.Q6J("displayType",s.getDisplayType(e))("iconShape",s.getTimelineIcon(e))("createdAt",e.createdAt)("name",s.getName(e))("featured",s.isFeatured(e)),n.xp6(1),n.Q6J("ngSwitch",e.type),n.xp6(1),n.Q6J("ngSwitchCase",s.type.CUSTOMER_REGISTERED),n.xp6(1),n.Q6J("ngSwitchCase",s.type.CUSTOMER_VERIFIED),n.xp6(1),n.Q6J("ngSwitchCase",s.type.CUSTOMER_DETAIL_UPDATED),n.xp6(1),n.Q6J("ngSwitchCase",s.type.CUSTOMER_ADDED_TO_GROUP),n.xp6(1),n.Q6J("ngSwitchCase",s.type.CUSTOMER_REMOVED_FROM_GROUP),n.xp6(1),n.Q6J("ngSwitchCase",s.type.CUSTOMER_ADDRESS_CREATED),n.xp6(1),n.Q6J("ngSwitchCase",s.type.CUSTOMER_ADDRESS_UPDATED),n.xp6(1),n.Q6J("ngSwitchCase",s.type.CUSTOMER_ADDRESS_DELETED),n.xp6(1),n.Q6J("ngSwitchCase",s.type.CUSTOMER_PASSWORD_UPDATED),n.xp6(1),n.Q6J("ngSwitchCase",s.type.CUSTOMER_PASSWORD_RESET_REQUESTED),n.xp6(1),n.Q6J("ngSwitchCase",s.type.CUSTOMER_PASSWORD_RESET_VERIFIED),n.xp6(1),n.Q6J("ngSwitchCase",s.type.CUSTOMER_EMAIL_UPDATE_REQUESTED),n.xp6(1),n.Q6J("ngSwitchCase",s.type.CUSTOMER_EMAIL_UPDATE_VERIFIED),n.xp6(1),n.Q6J("ngSwitchCase",s.type.CUSTOMER_NOTE)}}class st{constructor(){this.addNote=new n.vpe,this.updateNote=new n.vpe,this.deleteNote=new n.vpe,this.note="",this.type=c.iYD}getDisplayType(e){switch(e.type){case c.iYD.CUSTOMER_VERIFIED:case c.iYD.CUSTOMER_EMAIL_UPDATE_VERIFIED:case c.iYD.CUSTOMER_PASSWORD_RESET_VERIFIED:return"success";case c.iYD.CUSTOMER_REGISTERED:return"muted";case c.iYD.CUSTOMER_REMOVED_FROM_GROUP:return"error";default:return"default"}}getTimelineIcon(e){switch(e.type){case c.iYD.CUSTOMER_REGISTERED:return"user";case c.iYD.CUSTOMER_VERIFIED:return["assign-user","is-solid"];case c.iYD.CUSTOMER_NOTE:return"note";case c.iYD.CUSTOMER_ADDED_TO_GROUP:case c.iYD.CUSTOMER_REMOVED_FROM_GROUP:return"users"}}isFeatured(e){switch(e.type){case c.iYD.CUSTOMER_REGISTERED:case c.iYD.CUSTOMER_VERIFIED:return!0;default:return!1}}getName(e){const{administrator:t}=e;return t?`${t.firstName} ${t.lastName}`:`${this.customer.firstName} ${this.customer.lastName}`}addNoteToCustomer(){this.addNote.emit({note:this.note}),this.note=""}}st.\u0275fac=function(e){return new(e||st)},st.\u0275cmp=n.Xpm({type:st,selectors:[["vdr-customer-history"]],inputs:{customer:"customer",history:"history"},outputs:{addNote:"addNote",updateNote:"updateNote",deleteNote:"deleteNote"},decls:7,vars:6,consts:[[1,"entry-list"],["iconShape","note","displayType","muted",4,"vdrIfPermissions"],[3,"displayType","iconShape","createdAt","name","featured",4,"ngFor","ngForOf"],[3,"isLast"],["iconShape","note","displayType","muted"],[1,"note-entry"],["name","note",1,"note",3,"ngModel","ngModelChange"],[1,"btn","btn-secondary",3,"disabled","click"],[3,"displayType","iconShape","createdAt","name","featured"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"title"],[4,"ngIf","ngIfElse"],["namedStrategy",""],[1,"flex"],[3,"value"],[1,"address-string"],[3,"label"],[1,"note-text"],[1,"flex-spacer"],["vdrDropdownTrigger","",1,"icon-button"],["shape","ellipsis-vertical"],["vdrPosition","bottom-right"],["vdrDropdownItem","",1,"button",3,"disabled","click"],["shape","edit"],[1,"dropdown-divider"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&(n.TgZ(0,"h4"),n._uU(1),n.ALo(2,"translate"),n.qZA(),n.TgZ(3,"div",0),n.YNc(4,Fe,6,5,"vdr-timeline-entry",1),n.YNc(5,tt,16,20,"vdr-timeline-entry",2),n._UZ(6,"vdr-timeline-entry",3),n.qZA()),2&e&&(n.xp6(1),n.Oqu(n.lcZ(2,4,"customer.customer-history")),n.xp6(3),n.Q6J("vdrIfPermissions","UpdateCustomer"),n.xp6(1),n.Q6J("ngForOf",t.history),n.xp6(1),n.Q6J("isLast",!0))},directives:[Ne.H,y.sg,Ie._,v.y,l.Fj,l.JJ,l.On,y.RF,y.n9,y.O5,Oe.C,Se._,Je.W,R.J,B.U,j.qvL,H.N,V.H],pipes:[C.X$,T.j],styles:[".entry-list[_ngcontent-%COMP%]{margin-top:24px;margin-left:24px;margin-right:12px}.note-entry[_ngcontent-%COMP%]{display:flex;align-items:center}.note-entry[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{flex:1}.note-entry[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}textarea.note[_ngcontent-%COMP%]{flex:1;height:36px;border-radius:3px;margin-right:6px}.note-text[_ngcontent-%COMP%]{color:var(--color-text-100);white-space:pre-wrap}.address-string[_ngcontent-%COMP%]{font-size:smaller;color:var(--color-text-200)}"],changeDetection:0});var rt=s(2651),ot=s(66826),it=s(4187);function nt(e,t){if(1&e&&(n.TgZ(0,"div",23),n.ALo(1,"localeDate"),n._uU(2),n.ALo(3,"translate"),n.ALo(4,"timeAgo"),n.qZA()),2&e){const e=t.ngIf;n.Q6J("title",n.xi3(1,3,e,"medium")),n.xp6(2),n.AsE(" ",n.lcZ(3,6,"customer.last-login"),": ",n.lcZ(4,8,e)," ")}}function ct(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",24),n.NdJ("click",function(){return n.CHM(e),n.oxw().create()}),n._uU(1),n.ALo(2,"translate"),n.qZA()}if(2&e){const e=n.oxw();n.Q6J("disabled",!(e.addressDefaultsUpdated||e.detailForm.valid&&e.detailForm.dirty)),n.xp6(1),n.hij(" ",n.lcZ(2,2,"common.create")," ")}}function at(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",24),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).save()}),n._uU(1),n.ALo(2,"translate"),n.qZA()}if(2&e){const e=n.oxw(2);n.Q6J("disabled",!(e.addressDefaultsUpdated||e.detailForm.valid&&e.detailForm.dirty)),n.xp6(1),n.hij(" ",n.lcZ(2,2,"common.update")," ")}}function lt(e,t){1&e&&n.YNc(0,at,3,4,"button",25),2&e&&n.Q6J("vdrIfPermissions","UpdateCustomer")}function dt(e,t){1&e&&(n.TgZ(0,"vdr-form-field",26),n.ALo(1,"translate"),n._UZ(2,"input",27),n.qZA()),2&e&&n.Q6J("label",n.lcZ(1,1,"customer.password"))}const ut=function(){return["customer","customFields"]};function mt(e,t){if(1&e&&(n.TgZ(0,"section",28),n.TgZ(1,"label"),n._uU(2),n.ALo(3,"translate"),n.qZA(),n._UZ(4,"vdr-tabbed-custom-fields",29),n.qZA()),2&e){const e=n.oxw();n.xp6(2),n.Oqu(n.lcZ(3,3,"common.custom-fields")),n.xp6(2),n.Q6J("customFields",e.customFields)("customFieldsFormGroup",e.detailForm.get(n.DdM(5,ut)))}}function pt(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"vdr-chip",36),n.NdJ("iconClick",function(){const t=n.CHM(e).$implicit;return n.oxw(3).removeFromGroup(t)}),n._uU(1),n.qZA()}if(2&e){const e=t.$implicit;n.Q6J("colorFrom",e.id),n.xp6(1),n.Oqu(e.name)}}function gt(e,t){if(1&e&&(n.ynx(0),n.YNc(1,pt,2,2,"vdr-chip",35),n.BQk()),2&e){const e=n.oxw().ngIf;n.xp6(1),n.Q6J("ngForOf",e)}}function ht(e,t){1&e&&(n._uU(0),n.ALo(1,"translate")),2&e&&n.hij(" ",n.lcZ(1,1,"customer.not-a-member-of-any-groups")," ")}function ft(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",37),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).addToGroup()}),n._UZ(1,"clr-icon",38),n._uU(2),n.ALo(3,"translate"),n.qZA()}2&e&&(n.xp6(2),n.hij(" ",n.lcZ(3,1,"customer.add-customer-to-group")," "))}function Zt(e,t){if(1&e&&(n.TgZ(0,"div",30),n.TgZ(1,"label",31),n._uU(2),n.ALo(3,"translate"),n.qZA(),n.YNc(4,gt,2,1,"ng-container",32),n.YNc(5,ht,2,3,"ng-template",null,33,n.W1O),n.TgZ(7,"div"),n.YNc(8,ft,4,3,"button",34),n.qZA(),n.qZA()),2&e){const e=t.ngIf,s=n.MAs(6);n.xp6(2),n.Oqu(n.lcZ(3,4,"customer.customer-groups")),n.xp6(2),n.Q6J("ngIf",e.length)("ngIfElse",s),n.xp6(4),n.Q6J("vdrIfPermissions","UpdateCustomerGroup")}}const vt=function(){return["UpdateCustomer"]};function bt(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"vdr-address-card",45),n.NdJ("setAsDefaultBilling",function(t){return n.CHM(e),n.oxw(2).setDefaultBillingAddressId(t)})("setAsDefaultShipping",function(t){return n.CHM(e),n.oxw(2).setDefaultShippingAddressId(t)})("deleteAddress",function(t){return n.CHM(e),n.oxw(2).toggleDeleteAddress(t)}),n.ALo(1,"async"),n.ALo(2,"hasPermission"),n.qZA()}if(2&e){const e=t.$implicit,s=n.oxw(2);n.ekj("to-delete",s.addressesToDeleteIds.has(e.value.id)),n.Q6J("availableCountries",n.lcZ(1,8,s.availableCountries$))("isDefaultBilling",s.defaultBillingAddressId===e.value.id)("isDefaultShipping",s.defaultShippingAddressId===e.value.id)("addressForm",e)("customFields",s.addressCustomFields)("editable",n.lcZ(2,10,n.DdM(12,vt))&&!s.addressesToDeleteIds.has(e.value.id))}}function At(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",46),n.NdJ("click",function(){return n.CHM(e),n.oxw(2).addAddress()}),n._UZ(1,"clr-icon",38),n._uU(2),n.ALo(3,"translate"),n.qZA()}2&e&&(n.xp6(2),n.hij(" ",n.lcZ(3,1,"customer.create-new-address")," "))}const xt=function(e){return["/orders/",e]};function Ct(e,t){if(1&e&&(n.TgZ(0,"td",47),n._uU(1),n.qZA(),n.TgZ(2,"td",47),n._uU(3),n.qZA(),n.TgZ(4,"td",47),n._uU(5),n.ALo(6,"localeCurrency"),n.qZA(),n.TgZ(7,"td",47),n._uU(8),n.ALo(9,"localeDate"),n.qZA(),n.TgZ(10,"td",48),n._UZ(11,"vdr-table-row-action",49),n.ALo(12,"translate"),n.qZA()),2&e){const e=t.item;n.xp6(1),n.Oqu(e.code),n.xp6(2),n.Oqu(e.state),n.xp6(2),n.Oqu(n.xi3(6,6,e.totalWithTax,e.currencyCode)),n.xp6(3),n.Oqu(n.xi3(9,9,e.updatedAt,"medium")),n.xp6(3),n.Q6J("label",n.lcZ(12,12,"common.open"))("linkTo",n.VKq(14,xt,e.id))}}function yt(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",39),n.TgZ(1,"div",40),n.TgZ(2,"h3"),n._uU(3),n.ALo(4,"translate"),n.qZA(),n.YNc(5,bt,3,13,"vdr-address-card",41),n.YNc(6,At,4,3,"button",42),n.qZA(),n.TgZ(7,"div",43),n.TgZ(8,"h3"),n._uU(9),n.ALo(10,"translate"),n.qZA(),n.TgZ(11,"vdr-data-table",44),n.NdJ("itemsPerPageChange",function(t){return n.CHM(e),n.oxw().setOrderItemsPerPage(t)})("pageChange",function(t){return n.CHM(e),n.oxw().setOrderCurrentPage(t)}),n.ALo(12,"async"),n.ALo(13,"async"),n.ALo(14,"translate"),n.TgZ(15,"vdr-dt-column"),n._uU(16),n.ALo(17,"translate"),n.qZA(),n.TgZ(18,"vdr-dt-column"),n._uU(19),n.ALo(20,"translate"),n.qZA(),n.TgZ(21,"vdr-dt-column"),n._uU(22),n.ALo(23,"translate"),n.qZA(),n.TgZ(24,"vdr-dt-column"),n._uU(25),n.ALo(26,"translate"),n.qZA(),n._UZ(27,"vdr-dt-column"),n.YNc(28,Ct,13,16,"ng-template"),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(3),n.Oqu(n.lcZ(4,13,"customer.addresses")),n.xp6(2),n.Q6J("ngForOf",e.getAddressFormControls()),n.xp6(1),n.Q6J("vdrIfPermissions","UpdateCustomer"),n.xp6(3),n.Oqu(n.lcZ(10,15,"customer.orders")),n.xp6(2),n.Q6J("items",n.lcZ(12,17,e.orders$))("itemsPerPage",e.ordersPerPage)("totalItems",n.lcZ(13,19,e.ordersCount$))("currentPage",e.currentOrdersPage)("emptyStateLabel",n.lcZ(14,21,"customer.no-orders-placed")),n.xp6(5),n.Oqu(n.lcZ(17,23,"common.code")),n.xp6(3),n.Oqu(n.lcZ(20,25,"order.state")),n.xp6(3),n.Oqu(n.lcZ(23,27,"order.total")),n.xp6(3),n.Oqu(n.lcZ(26,29,"common.updated-at"))}}function Tt(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"div",39),n.TgZ(1,"div",50),n.TgZ(2,"vdr-customer-history",51),n.NdJ("addNote",function(t){return n.CHM(e),n.oxw().addNoteToCustomer(t)})("updateNote",function(t){return n.CHM(e),n.oxw().updateNote(t)})("deleteNote",function(t){return n.CHM(e),n.oxw().deleteNote(t)}),n.ALo(3,"async"),n.ALo(4,"async"),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=n.oxw();n.xp6(2),n.Q6J("customer",n.lcZ(3,2,e.entity$))("history",n.lcZ(4,4,e.history$))}}class _t extends c.UT_{constructor(e,t,s,r,o,i,n,c){super(e,t,s,i),this.changeDetector=r,this.formBuilder=o,this.dataService=i,this.modalService=n,this.notificationService=c,this.fetchHistory=new d.xQ,this.addressesToDeleteIds=new Set,this.addressDefaultsUpdated=!1,this.ordersPerPage=10,this.currentOrdersPage=1,this.orderListUpdates$=new d.xQ,this.customFields=this.getCustomFieldConfig("Customer"),this.addressCustomFields=this.getCustomFieldConfig("Address"),this.detailForm=this.formBuilder.group({customer:this.formBuilder.group({title:"",firstName:["",l.kI.required],lastName:["",l.kI.required],phoneNumber:"",emailAddress:["",[l.kI.required,l.kI.email]],password:"",customFields:this.formBuilder.group(this.customFields.reduce((e,t)=>Object.assign(Object.assign({},e),{[t.name]:""}),{}))}),addresses:new l.Oe([])})}ngOnInit(){this.init(),this.availableCountries$=this.dataService.settings.getAvailableCountries().mapSingle(e=>e.countries.items).pipe((0,ae.d)(1));const e=this.entity$.pipe(function(...e){return t=>t.lift.call((0,le.T)(t,...e))}(this.orderListUpdates$));this.orders$=e.pipe((0,i.U)(e=>e.orders.items)),this.ordersCount$=this.entity$.pipe((0,i.U)(e=>e.orders.totalItems)),this.history$=this.fetchHistory.pipe((0,m.O)(null),(0,o.w)(()=>this.dataService.customer.getCustomerHistory(this.id,{sort:{createdAt:c.Asd.DESC}}).mapStream(e=>{var t;return null===(t=e.customer)||void 0===t?void 0:t.history.items})))}ngOnDestroy(){this.destroy(),this.orderListUpdates$.complete()}getAddressFormControls(){return this.detailForm.get(["addresses"]).controls}setDefaultBillingAddressId(e){this.defaultBillingAddressId=e,this.addressDefaultsUpdated=!0}setDefaultShippingAddressId(e){this.defaultShippingAddressId=e,this.addressDefaultsUpdated=!0}toggleDeleteAddress(e){this.addressesToDeleteIds.has(e)?this.addressesToDeleteIds.delete(e):this.addressesToDeleteIds.add(e)}addAddress(){const e=this.detailForm.get("addresses"),t=this.formBuilder.group({fullName:"",company:"",streetLine1:["",l.kI.required],streetLine2:"",city:"",province:"",postalCode:"",countryCode:["",l.kI.required],phoneNumber:"",defaultShippingAddress:!1,defaultBillingAddress:!1});if(this.addressCustomFields.length){const e=this.formBuilder.group({});for(const t of this.addressCustomFields)e.addControl(t.name,new l.NI(""));t.addControl("customFields",e)}e.push(t)}setOrderItemsPerPage(e){this.ordersPerPage=+e,this.fetchOrdersList()}setOrderCurrentPage(e){this.currentOrdersPage=+e,this.fetchOrdersList()}create(){var e;const t=this.detailForm.get("customer");if(!t)return;const s=t.value,r=null===(e=t.get("customFields"))||void 0===e?void 0:e.value,o={title:s.title,emailAddress:s.emailAddress,firstName:s.firstName,lastName:s.lastName,phoneNumber:s.phoneNumber,customFields:r};this.dataService.customer.createCustomer(o,s.password).subscribe(({createCustomer:e})=>{switch(e.__typename){case"Customer":this.notificationService.success((0,re.J)("common.notify-create-success"),{entity:"Customer"}),e.emailAddress&&!s.password&&this.notificationService.notify({message:(0,re.J)("customer.email-verification-sent"),translationVars:{emailAddress:s.emailAddress},type:"info",duration:1e4}),this.detailForm.markAsPristine(),this.addressDefaultsUpdated=!1,this.changeDetector.markForCheck(),this.router.navigate(["../",e.id],{relativeTo:this.route});break;case"EmailAddressConflictError":this.notificationService.error(e.message)}})}save(){this.entity$.pipe((0,L.q)(1),(0,de.zg)(({id:e})=>{var t;const s=[],r=this.detailForm.get("customer");if(r&&r.dirty){const o=r.value,n=null===(t=r.get("customFields"))||void 0===t?void 0:t.value,c={id:e,title:o.title,emailAddress:o.emailAddress,firstName:o.firstName,lastName:o.lastName,phoneNumber:o.phoneNumber,customFields:n};s.push(this.dataService.customer.updateCustomer(c).pipe((0,i.U)(e=>e.updateCustomer)))}const o=this.detailForm.get("addresses");if(o&&o.dirty||this.addressDefaultsUpdated)for(const n of o.controls)if(n.dirty||this.addressDefaultsUpdated){const t=n.value,r={fullName:t.fullName,company:t.company,streetLine1:t.streetLine1,streetLine2:t.streetLine2,city:t.city,province:t.province,postalCode:t.postalCode,countryCode:t.countryCode,phoneNumber:t.phoneNumber,defaultShippingAddress:this.defaultShippingAddressId===t.id,defaultBillingAddress:this.defaultBillingAddressId===t.id,customFields:t.customFields};t.id?this.addressesToDeleteIds.has(t.id)?s.push(this.dataService.customer.deleteCustomerAddress(t.id).pipe((0,i.U)(e=>e.deleteCustomerAddress))):s.push(this.dataService.customer.updateCustomerAddress(Object.assign(Object.assign({},r),{id:t.id})).pipe((0,i.U)(e=>e.updateCustomerAddress))):s.push(this.dataService.customer.createCustomerAddress(e,r).pipe((0,i.U)(e=>e.createCustomerAddress)))}return(0,ie.D)(s)})).subscribe(e=>{let t=!1;for(const s of e)switch(s.__typename){case"Customer":case"Address":case"Success":t||(this.notificationService.success((0,re.J)("common.notify-update-success"),{entity:"Customer"}),t=!0,this.detailForm.markAsPristine(),this.addressDefaultsUpdated=!1,this.changeDetector.markForCheck(),this.fetchHistory.next(),this.dataService.customer.getCustomer(this.id).single$.subscribe());break;case"EmailAddressConflictError":this.notificationService.error(s.message)}},e=>{this.notificationService.error((0,re.J)("common.notify-update-error"),{entity:"Customer"})})}addToGroup(){this.modalService.fromComponent(ve,{size:"md"}).pipe((0,o.w)(e=>e?(0,ne.D)(e):ce.E),(0,ue.b)(e=>this.dataService.customer.addCustomersToGroup(e,[this.id]))).subscribe({next:e=>{this.notificationService.success((0,re.J)("customer.add-customers-to-group-success"),{customerCount:1,groupName:e.addCustomersToGroup.name})},complete:()=>{this.dataService.customer.getCustomer(this.id,{take:0}).single$.subscribe(),this.fetchHistory.next()}})}removeFromGroup(e){this.modalService.dialog({title:(0,re.J)("customer.confirm-remove-customer-from-group"),buttons:[{type:"secondary",label:(0,re.J)("common.cancel")},{type:"danger",label:(0,re.J)("common.delete"),returnValue:!0}]}).pipe((0,o.w)(t=>t?this.dataService.customer.removeCustomersFromGroup(e.id,[this.id]):ce.E),(0,o.w)(()=>this.dataService.customer.getCustomer(this.id,{take:0}).single$)).subscribe(t=>{this.notificationService.success((0,re.J)("customer.remove-customers-from-group-success"),{customerCount:1,groupName:e.name}),this.fetchHistory.next()})}addNoteToCustomer({note:e}){this.dataService.customer.addNoteToCustomer(this.id,e).subscribe(()=>{this.fetchHistory.next(),this.notificationService.success((0,re.J)("common.notify-create-success"),{entity:"Note"})})}updateNote(e){this.modalService.fromComponent(c.UlA,{closable:!0,locals:{displayPrivacyControls:!1,note:e.data.note}}).pipe((0,o.w)(t=>t?this.dataService.customer.updateCustomerNote({noteId:e.id,note:t.note}):ce.E)).subscribe(e=>{this.fetchHistory.next(),this.notificationService.success((0,re.J)("common.notify-update-success"),{entity:"Note"})})}deleteNote(e){return this.modalService.dialog({title:(0,re.J)("common.confirm-delete-note"),body:e.data.note,buttons:[{type:"secondary",label:(0,re.J)("common.cancel")},{type:"danger",label:(0,re.J)("common.delete"),returnValue:!0}]}).pipe((0,o.w)(t=>t?this.dataService.customer.deleteCustomerNote(e.id):ce.E)).subscribe(()=>{this.fetchHistory.next(),this.notificationService.success((0,re.J)("common.notify-delete-success"),{entity:"Note"})})}setFormValues(e){var t;const s=this.detailForm.get("customer");if(s&&s.patchValue({title:e.title,firstName:e.firstName,lastName:e.lastName,phoneNumber:e.phoneNumber,emailAddress:e.emailAddress}),e.addresses){const s=new l.Oe([]);for(const r of e.addresses){const e=r,{customFields:o}=e,i=(0,se._T)(e,["customFields"]),n=this.formBuilder.group(Object.assign(Object.assign({},i),{countryCode:r.country.code}));if(s.push(n),r.defaultShippingAddress&&(this.defaultShippingAddressId=r.id),r.defaultBillingAddress&&(this.defaultBillingAddressId=r.id),this.addressCustomFields.length){const e=this.formBuilder.group({});for(const s of this.addressCustomFields){const o=s.name,i=null===(t=r.customFields)||void 0===t?void 0:t[o],n=new l.NI(i);e.addControl(o,n)}n.addControl("customFields",e)}}this.detailForm.setControl("addresses",s)}this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get(["customer","customFields"]),e),this.changeDetector.markForCheck()}fetchOrdersList(){this.dataService.customer.getCustomer(this.id,{take:this.ordersPerPage,skip:(this.currentOrdersPage-1)*this.ordersPerPage}).single$.pipe((0,i.U)(e=>e.customer),(0,F.h)(oe.notNullOrUndefined)).subscribe(e=>this.orderListUpdates$.next(e))}}function qt(e,t){1&e&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"customer.update-customer-group")))}function Ut(e,t){1&e&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"customer.create-customer-group")))}function Nt(e,t){if(1&e&&(n.YNc(0,qt,3,3,"span",6),n.YNc(1,Ut,3,3,"span",6)),2&e){const e=n.oxw();n.Q6J("ngIf",e.group.id),n.xp6(1),n.Q6J("ngIf",!e.group.id)}}function wt(e,t){if(1&e&&(n.TgZ(0,"section",7),n.TgZ(1,"label"),n._uU(2),n.ALo(3,"translate"),n.qZA(),n._UZ(4,"vdr-tabbed-custom-fields",8),n.qZA()),2&e){const e=n.oxw();n.xp6(2),n.Oqu(n.lcZ(3,3,"common.custom-fields")),n.xp6(2),n.Q6J("customFields",e.customFields)("customFieldsFormGroup",e.form.get("customFields"))}}function It(e,t){1&e&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"customer.update-customer-group")))}function Ot(e,t){1&e&&(n.TgZ(0,"span"),n._uU(1),n.ALo(2,"translate"),n.qZA()),2&e&&(n.xp6(1),n.Oqu(n.lcZ(2,1,"customer.create-customer-group")))}function St(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",9),n.NdJ("click",function(){return n.CHM(e),n.oxw().cancel()}),n._uU(1),n.ALo(2,"translate"),n.qZA(),n.TgZ(3,"button",10),n.NdJ("click",function(){return n.CHM(e),n.oxw().save()}),n.YNc(4,It,3,3,"span",6),n.YNc(5,Ot,3,3,"span",6),n.qZA()}if(2&e){const e=n.oxw();n.xp6(1),n.Oqu(n.lcZ(2,4,"common.cancel")),n.xp6(2),n.Q6J("disabled",!e.form.valid),n.xp6(1),n.Q6J("ngIf",e.group.id),n.xp6(1),n.Q6J("ngIf",!e.group.id)}}_t.\u0275fac=function(e){return new(e||_t)(n.Y36(Z.gz),n.Y36(Z.F0),n.Y36(c.iHG),n.Y36(n.sBO),n.Y36(l.qu),n.Y36(c.DoR),n.Y36(c.Z7U),n.Y36(c.gqp))},_t.\u0275cmp=n.Xpm({type:_t,selectors:[["vdr-customer-detail"]],features:[n.qOj],decls:46,vars:59,consts:[[1,"flex","clr-align-items-center"],[3,"entity"],[3,"customer"],["class","last-login",3,"title",4,"ngIf"],["locationId","customer-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","title",3,"label","readOnlyToggle"],["id","title","type","text","formControlName","title"],["for","firstName",3,"label","readOnlyToggle"],["id","firstName","type","text","formControlName","firstName"],["for","lastName",3,"label","readOnlyToggle"],["id","lastName","type","text","formControlName","lastName"],["for","emailAddress",3,"label","readOnlyToggle"],["id","emailAddress","type","text","formControlName","emailAddress"],["for","phoneNumber",3,"label","readOnlyToggle"],["id","phoneNumber","type","text","formControlName","phoneNumber"],["for","password",3,"label",4,"ngIf"],["formGroupName","customFields",4,"ngIf"],["locationId","customer-detail",3,"entity$","detailForm"],["class","groups",4,"ngIf"],["class","clr-row",4,"ngIf"],[1,"last-login",3,"title"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],["for","password",3,"label"],["id","password","type","password","formControlName","password"],["formGroupName","customFields"],["entityName","Customer",3,"customFields","customFieldsFormGroup"],[1,"groups"],[1,"clr-control-label"],[4,"ngIf","ngIfElse"],["noGroups",""],["class","btn btn-sm btn-secondary",3,"click",4,"vdrIfPermissions"],["icon","times",3,"colorFrom","iconClick",4,"ngFor","ngForOf"],["icon","times",3,"colorFrom","iconClick"],[1,"btn","btn-sm","btn-secondary",3,"click"],["shape","plus"],[1,"clr-row"],[1,"clr-col-md-4"],[3,"to-delete","availableCountries","isDefaultBilling","isDefaultShipping","addressForm","customFields","editable","setAsDefaultBilling","setAsDefaultShipping","deleteAddress",4,"ngFor","ngForOf"],["class","btn btn-secondary",3,"click",4,"vdrIfPermissions"],[1,"clr-col-md-8"],[3,"items","itemsPerPage","totalItems","currentPage","emptyStateLabel","itemsPerPageChange","pageChange"],[3,"availableCountries","isDefaultBilling","isDefaultShipping","addressForm","customFields","editable","setAsDefaultBilling","setAsDefaultShipping","deleteAddress"],[1,"btn","btn-secondary",3,"click"],[1,"left"],[1,"right"],["iconShape","shopping-cart",3,"label","linkTo"],[1,"clr-col-md-6"],[3,"customer","history","addNote","updateNote","deleteNote"]],template:function(e,t){if(1&e&&(n.TgZ(0,"vdr-action-bar"),n.TgZ(1,"vdr-ab-left"),n.TgZ(2,"div",0),n._UZ(3,"vdr-entity-info",1),n.ALo(4,"async"),n._UZ(5,"vdr-customer-status-label",2),n.ALo(6,"async"),n.YNc(7,nt,5,10,"div",3),n.ALo(8,"async"),n.qZA(),n.qZA(),n.TgZ(9,"vdr-ab-right"),n._UZ(10,"vdr-action-bar-items",4),n.YNc(11,ct,3,4,"button",5),n.ALo(12,"async"),n.YNc(13,lt,1,1,"ng-template",null,6,n.W1O),n.qZA(),n.qZA(),n.TgZ(15,"form",7),n.TgZ(16,"vdr-form-field",8),n.ALo(17,"translate"),n.ALo(18,"async"),n._UZ(19,"input",9),n.qZA(),n.TgZ(20,"vdr-form-field",10),n.ALo(21,"translate"),n.ALo(22,"async"),n._UZ(23,"input",11),n.qZA(),n.TgZ(24,"vdr-form-field",12),n.ALo(25,"translate"),n.ALo(26,"async"),n._UZ(27,"input",13),n.qZA(),n.TgZ(28,"vdr-form-field",14),n.ALo(29,"translate"),n.ALo(30,"async"),n._UZ(31,"input",15),n.qZA(),n.TgZ(32,"vdr-form-field",16),n.ALo(33,"translate"),n.ALo(34,"async"),n._UZ(35,"input",17),n.qZA(),n.YNc(36,dt,3,3,"vdr-form-field",18),n.ALo(37,"async"),n.YNc(38,mt,5,6,"section",19),n._UZ(39,"vdr-custom-detail-component-host",20),n.qZA(),n.YNc(40,Zt,9,6,"div",21),n.ALo(41,"async"),n.YNc(42,yt,29,31,"div",22),n.ALo(43,"async"),n.YNc(44,Tt,5,6,"div",22),n.ALo(45,"async")),2&e){const e=n.MAs(14);let s,r;n.xp6(3),n.Q6J("entity",n.lcZ(4,23,t.entity$)),n.xp6(2),n.Q6J("customer",n.lcZ(6,25,t.entity$)),n.xp6(2),n.Q6J("ngIf",null==(s=n.lcZ(8,27,t.entity$))||null==s.user?null:s.user.lastLogin),n.xp6(4),n.Q6J("ngIf",n.lcZ(12,29,t.isNew$))("ngIfElse",e),n.xp6(4),n.Q6J("formGroup",t.detailForm.get("customer")),n.xp6(1),n.Q6J("label",n.lcZ(17,31,"customer.title"))("readOnlyToggle",!n.lcZ(18,33,t.isNew$)),n.xp6(4),n.Q6J("label",n.lcZ(21,35,"customer.first-name"))("readOnlyToggle",!n.lcZ(22,37,t.isNew$)),n.xp6(4),n.Q6J("label",n.lcZ(25,39,"customer.last-name"))("readOnlyToggle",!n.lcZ(26,41,t.isNew$)),n.xp6(4),n.Q6J("label",n.lcZ(29,43,"customer.email-address"))("readOnlyToggle",!n.lcZ(30,45,t.isNew$)),n.xp6(4),n.Q6J("label",n.lcZ(33,47,"customer.phone-number"))("readOnlyToggle",!n.lcZ(34,49,t.isNew$)),n.xp6(4),n.Q6J("ngIf",n.lcZ(37,51,t.isNew$)),n.xp6(2),n.Q6J("ngIf",t.customFields.length),n.xp6(1),n.Q6J("entity$",t.entity$)("detailForm",t.detailForm),n.xp6(1),n.Q6J("ngIf",null==(r=n.lcZ(41,53,t.entity$))?null:r.groups),n.xp6(2),n.Q6J("ngIf",!n.lcZ(43,55,t.isNew$)),n.xp6(2),n.Q6J("ngIf",!n.lcZ(45,57,t.isNew$))}},directives:[be.Kk,be.BN,Y.V,Te,y.O5,be.mz,_e.W,l._Y,l.JL,l.sg,qe.h,v.y,l.Fj,l.JJ,l.u,Ue.C,Ne.H,l.x0,j.MgK,we.y,y.sg,G.Y,j.qvL,b.Q,A.E,te,x.v,st],pipes:[y.Ov,C.X$,rt.H,ot.e,T.j,it.k],styles:[".last-login[_ngcontent-%COMP%]{margin-left:6px;color:var(--color-grey-500)}.to-delete[_ngcontent-%COMP%]{opacity:.5}"],changeDetection:0});const Jt=function(){return["CreateCustomerGroup","UpdateCustomerGroup"]};class Ft{constructor(e,t){this.serverConfigService=e,this.formBuilder=t,this.customFields=this.serverConfigService.getCustomFieldsFor("CustomerGroup")}ngOnInit(){var e;if(this.form=this.formBuilder.group({name:[this.group.name,l.kI.required],customFields:this.formBuilder.group(this.customFields.reduce((e,t)=>Object.assign(Object.assign({},e),{[t.name]:""}),{}))}),this.customFields.length){const t=this.form.get("customFields");for(const s of this.customFields){const r=s.name,o=null===(e=this.group.customFields)||void 0===e?void 0:e[r],i=t.get(r);i&&i.patchValue(o)}}}cancel(){this.resolveWith()}save(){this.resolveWith(this.form.value)}}Ft.\u0275fac=function(e){return new(e||Ft)(n.Y36(c.iHG),n.Y36(l.qu))},Ft.\u0275cmp=n.Xpm({type:Ft,selectors:[["vdr-customer-group-detail-dialog"]],decls:8,vars:9,consts:[["vdrDialogTitle",""],[3,"formGroup"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["formGroupName","customFields",4,"ngIf"],["vdrDialogButtons",""],[4,"ngIf"],["formGroupName","customFields"],["entityName","CustomerGroup",3,"customFields","customFieldsFormGroup"],["type","button",1,"btn",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(e,t){1&e&&(n.YNc(0,Nt,2,2,"ng-template",0),n.TgZ(1,"form",1),n.TgZ(2,"vdr-form-field",2),n.ALo(3,"translate"),n._UZ(4,"input",3),n.ALo(5,"hasPermission"),n.qZA(),n.YNc(6,wt,5,5,"section",4),n.qZA(),n.YNc(7,St,6,6,"ng-template",5)),2&e&&(n.xp6(1),n.Q6J("formGroup",t.form),n.xp6(1),n.Q6J("label",n.lcZ(3,4,"common.name")),n.xp6(2),n.Q6J("readonly",!n.lcZ(5,6,n.DdM(8,Jt))),n.xp6(2),n.Q6J("ngIf",t.customFields.length))},directives:[a.q,l._Y,l.JL,l.sg,qe.h,v.y,l.Fj,l.JJ,l.u,y.O5,N.n,l.x0,j.MgK,we.y],pipes:[C.X$,T.j],styles:[""],changeDetection:0});var Lt=s(81134),Dt=s(67202),Pt=s(35181);function Mt(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"button",8),n.NdJ("click",function(){return n.CHM(e),n.oxw().create()}),n._UZ(1,"clr-icon",9),n._uU(2),n.ALo(3,"translate"),n.qZA()}2&e&&(n.xp6(2),n.hij(" ",n.lcZ(3,1,"customer.create-new-customer-group")," "))}const kt=function(e){return{contents:e}},Et=function(e){return["./",e]};function Qt(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"tr"),n.ALo(1,"async"),n.TgZ(2,"td",12),n._UZ(3,"vdr-entity-info",13),n.qZA(),n.TgZ(4,"td",12),n.TgZ(5,"vdr-chip",14),n._uU(6),n.qZA(),n.qZA(),n.TgZ(7,"td",15),n.TgZ(8,"a",16),n._UZ(9,"clr-icon",17),n._uU(10),n.ALo(11,"translate"),n.qZA(),n.qZA(),n.TgZ(12,"td",18),n.TgZ(13,"button",19),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw(2).update(t)}),n._UZ(14,"clr-icon",20),n._uU(15),n.ALo(16,"translate"),n.qZA(),n.qZA(),n.TgZ(17,"td",18),n.TgZ(18,"vdr-dropdown"),n.TgZ(19,"button",21),n._uU(20),n.ALo(21,"translate"),n._UZ(22,"clr-icon",22),n.qZA(),n.TgZ(23,"vdr-dropdown-menu",23),n.TgZ(24,"button",24),n.NdJ("click",function(){const t=n.CHM(e).$implicit;return n.oxw(2).delete(t.id)}),n.ALo(25,"hasPermission"),n._UZ(26,"clr-icon",25),n._uU(27),n.ALo(28,"translate"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=t.$implicit,s=n.oxw(2);let r;n.ekj("active",e.id===(null==(r=n.lcZ(1,11,s.activeGroup$))?null:r.id)),n.xp6(3),n.Q6J("entity",e),n.xp6(2),n.Q6J("colorFrom",e.id),n.xp6(1),n.Oqu(e.name),n.xp6(2),n.Q6J("routerLink",n.VKq(25,Et,n.VKq(23,kt,e.id))),n.xp6(2),n.hij(" ",n.lcZ(11,13,"customer.view-group-members")," "),n.xp6(5),n.hij(" ",n.lcZ(16,15,"common.edit")," "),n.xp6(5),n.hij(" ",n.lcZ(21,17,"common.actions")," "),n.xp6(4),n.Q6J("disabled",!n.lcZ(25,19,"DeleteCustomerGroup")),n.xp6(3),n.hij(" ",n.lcZ(28,21,"common.delete")," ")}}function $t(e,t){if(1&e&&(n.TgZ(0,"table",10),n.ALo(1,"async"),n.TgZ(2,"tbody"),n.YNc(3,Qt,29,27,"tr",11),n.ALo(4,"async"),n.qZA(),n.qZA()),2&e){const e=n.oxw();n.ekj("expanded",n.lcZ(1,3,e.activeGroup$)),n.xp6(3),n.Q6J("ngForOf",n.lcZ(4,5,e.groups$))}}function Yt(e,t){1&e&&n._UZ(0,"vdr-empty-placeholder")}const Gt=function(e){return{groupName:e}};function jt(e,t){if(1&e){const e=n.EpF();n.ynx(0),n.TgZ(1,"div",26),n.TgZ(2,"div",27),n._uU(3),n.ALo(4,"async"),n.qZA(),n._UZ(5,"div",28),n.TgZ(6,"button",29),n.NdJ("click",function(){return n.CHM(e),n.oxw().closeMembers()}),n._UZ(7,"clr-icon",30),n.qZA(),n.qZA(),n.TgZ(8,"div",31),n.TgZ(9,"vdr-dropdown"),n.TgZ(10,"button",32),n._uU(11),n.ALo(12,"translate"),n._UZ(13,"clr-icon",22),n.qZA(),n.TgZ(14,"vdr-dropdown-menu",23),n.TgZ(15,"button",33),n.NdJ("click",function(){const t=n.CHM(e).ngIf,s=n.oxw();return s.removeFromGroup(t,s.selectedCustomerIds)}),n.ALo(16,"hasPermission"),n._UZ(17,"clr-icon",25),n._uU(18),n.ALo(19,"translate"),n.qZA(),n.qZA(),n.qZA(),n.TgZ(20,"button",34),n.NdJ("click",function(){const t=n.CHM(e).ngIf;return n.oxw().addToGroup(t)}),n._uU(21),n.ALo(22,"translate"),n.qZA(),n.qZA(),n.TgZ(23,"vdr-customer-group-member-list",35),n.NdJ("selectionChange",function(t){n.CHM(e);return n.oxw().selectedCustomerIds=t})("fetchParamsChange",function(t){return n.CHM(e),n.oxw().fetchGroupMembers$.next(t)}),n.ALo(24,"async"),n.ALo(25,"async"),n.qZA(),n.BQk()}if(2&e){const e=t.ngIf,s=n.oxw();n.xp6(3),n.AsE("",e.name," (",n.lcZ(4,11,s.membersTotal$),")"),n.xp6(7),n.Q6J("disabled",0===s.selectedCustomerIds.length),n.xp6(1),n.hij(" ",n.lcZ(12,13,"common.with-selected")," "),n.xp6(4),n.Q6J("disabled",!n.lcZ(16,15,"UpdateCustomerGroup")),n.xp6(3),n.hij(" ",n.lcZ(19,17,"customer.remove-from-group")," "),n.xp6(3),n.hij(" ",n.xi3(22,19,"customer.add-customers-to-group",n.VKq(26,Gt,e.name))," "),n.xp6(2),n.Q6J("members",n.lcZ(24,22,s.members$))("route",s.route)("totalItems",n.lcZ(25,24,s.membersTotal$))("selectedMemberIds",s.selectedCustomerIds)}}class Rt{constructor(e,t,s,o,i){this.dataService=e,this.notificationService=t,this.modalService=s,this.route=o,this.router=i,this.selectedCustomerIds=[],this.fetchGroupMembers$=new r.X({skip:0,take:0,filterTerm:""}),this.refreshActiveGroupMembers$=new r.X(void 0)}ngOnInit(){this.groups$=this.dataService.customer.getCustomerGroupList().mapStream(e=>e.customerGroups.items);const e=this.route.paramMap.pipe((0,i.U)(e=>e.get("contents")),(0,p.x)(),(0,h.b)(()=>this.selectedCustomerIds=[]));this.listIsEmpty$=this.groups$.pipe((0,i.U)(e=>0===e.length)),this.activeGroup$=(0,u.aj)(this.groups$,e).pipe((0,i.U)(([e,t])=>{if(t)return e.find(e=>e.id===t)}));const t=(0,u.aj)(this.activeGroup$,this.fetchGroupMembers$,this.refreshActiveGroupMembers$).pipe((0,o.w)(([e,{skip:t,take:s,filterTerm:r}])=>e?this.dataService.customer.getCustomerGroupWithCustomers(e.id,{skip:t,take:s,filter:{emailAddress:{contains:r}}}).mapStream(e=>{var t;return null===(t=e.customerGroup)||void 0===t?void 0:t.customers}):(0,Lt.of)(void 0)));this.members$=t.pipe((0,i.U)(e=>{var t;return null!==(t=null==e?void 0:e.items)&&void 0!==t?t:[]})),this.membersTotal$=t.pipe((0,i.U)(e=>{var t;return null!==(t=null==e?void 0:e.totalItems)&&void 0!==t?t:0}))}create(){this.modalService.fromComponent(Ft,{locals:{group:{name:""}}}).pipe((0,o.w)(e=>e?this.dataService.customer.createCustomerGroup(Object.assign(Object.assign({},e),{customerIds:[]})):ce.E),(0,o.w)(()=>this.dataService.customer.getCustomerGroupList().single$)).subscribe(()=>{this.notificationService.success((0,re.J)("common.notify-create-success"),{entity:"CustomerGroup"})},e=>{this.notificationService.error((0,re.J)("common.notify-create-error"),{entity:"CustomerGroup"})})}delete(e){this.modalService.dialog({title:(0,re.J)("customer.confirm-delete-customer-group"),buttons:[{type:"secondary",label:(0,re.J)("common.cancel")},{type:"danger",label:(0,re.J)("common.delete"),returnValue:!0}]}).pipe((0,o.w)(t=>t?this.dataService.customer.deleteCustomerGroup(e):ce.E),(0,o.w)(e=>e.deleteCustomerGroup.result===c.PcR.DELETED?this.dataService.customer.getCustomerGroupList().mapSingle(()=>({errorMessage:!1})):(0,Lt.of)({errorMessage:e.deleteCustomerGroup.message}))).subscribe(e=>{"string"==typeof e.errorMessage?this.notificationService.error(e.errorMessage):this.notificationService.success((0,re.J)("common.notify-delete-success"),{entity:"CustomerGroup"})},e=>{this.notificationService.error((0,re.J)("common.notify-delete-error"),{entity:"CustomerGroup"})})}update(e){this.modalService.fromComponent(Ft,{locals:{group:e}}).pipe((0,o.w)(t=>t?this.dataService.customer.updateCustomerGroup(Object.assign({id:e.id},t)):ce.E)).subscribe(()=>{this.notificationService.success((0,re.J)("common.notify-update-success"),{entity:"CustomerGroup"})},e=>{this.notificationService.error((0,re.J)("common.notify-update-error"),{entity:"CustomerGroup"})})}closeMembers(){const e=Object.assign({},this.route.snapshot.params);delete e.contents,this.router.navigate(["./",e],{relativeTo:this.route,queryParamsHandling:"preserve"})}addToGroup(e){this.modalService.fromComponent(J,{locals:{group:e,route:this.route},size:"md",verticalAlign:"top"}).pipe((0,o.w)(t=>t?this.dataService.customer.addCustomersToGroup(e.id,t).pipe((0,Dt.h)(t)):ce.E)).subscribe({next:t=>{this.notificationService.success((0,re.J)("customer.add-customers-to-group-success"),{customerCount:t.length,groupName:e.name}),this.refreshActiveGroupMembers$.next(),this.selectedCustomerIds=[]}})}removeFromGroup(e,t){this.dataService.customer.removeCustomersFromGroup(e.id,t).subscribe({complete:()=>{this.notificationService.success((0,re.J)("customer.remove-customers-from-group-success"),{customerCount:t.length,groupName:e.name}),this.refreshActiveGroupMembers$.next(),this.selectedCustomerIds=[]}})}}Rt.\u0275fac=function(e){return new(e||Rt)(n.Y36(c.DoR),n.Y36(c.gqp),n.Y36(c.Z7U),n.Y36(Z.gz),n.Y36(Z.F0))},Rt.\u0275cmp=n.Xpm({type:Rt,selectors:[["vdr-customer-group-list"]],decls:15,vars:12,consts:[["locationId","customer-group-list"],["class","btn btn-primary",3,"click",4,"vdrIfPermissions"],[1,"group-wrapper"],[1,"group-list"],["class","table mt0",3,"expanded",4,"ngIf","ngIfElse"],["emptyPlaceholder",""],[1,"group-members"],[4,"ngIf"],[1,"btn","btn-primary",3,"click"],["shape","plus"],[1,"table","mt0"],[3,"active",4,"ngFor","ngForOf"],[1,"left","align-middle"],[3,"entity"],[3,"colorFrom"],[1,"text-right","align-middle"],["queryParamsHandling","preserve",1,"btn","btn-link","btn-sm",3,"routerLink"],["shape","view-list"],[1,"align-middle"],[1,"btn","btn-link","btn-sm",3,"click"],["shape","edit"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["vdrDropdownItem","",1,"button",3,"disabled","click"],["shape","trash",1,"is-danger"],[1,"flex"],[1,"header-title-row"],[1,"flex-spacer"],["type","button",1,"close-button",3,"click"],["shape","close"],[1,"controls"],["type","button","vdrDropdownTrigger","",1,"btn","btn-secondary","btn-sm",3,"disabled"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],[1,"btn","btn-secondary","btn-sm",3,"click"],[3,"members","route","totalItems","selectedMemberIds","selectionChange","fetchParamsChange"]],template:function(e,t){if(1&e&&(n.TgZ(0,"vdr-action-bar"),n._UZ(1,"vdr-ab-left"),n.TgZ(2,"vdr-ab-right"),n._UZ(3,"vdr-action-bar-items",0),n.YNc(4,Mt,4,3,"button",1),n.qZA(),n.qZA(),n.TgZ(5,"div",2),n.TgZ(6,"div",3),n.YNc(7,$t,5,7,"table",4),n.ALo(8,"async"),n.qZA(),n.YNc(9,Yt,1,0,"ng-template",null,5,n.W1O),n.TgZ(11,"div",6),n.ALo(12,"async"),n.YNc(13,jt,26,28,"ng-container",7),n.ALo(14,"async"),n.qZA(),n.qZA()),2&e){const e=n.MAs(10);n.xp6(4),n.Q6J("vdrIfPermissions","CreateCustomerGroup"),n.xp6(3),n.Q6J("ngIf",!n.lcZ(8,6,t.listIsEmpty$))("ngIfElse",e),n.xp6(4),n.ekj("expanded",n.lcZ(12,8,t.activeGroup$)),n.xp6(2),n.Q6J("ngIf",n.lcZ(14,10,t.activeGroup$))}},directives:[be.Kk,be.BN,be.mz,_e.W,Ne.H,y.O5,j.qvL,y.sg,Y.V,G.Y,Z.yS,R.J,B.U,H.N,V.H,Pt.j,U],pipes:[y.Ov,C.X$,T.j],styles:[".group-wrapper[_ngcontent-%COMP%]{display:flex;height:calc(100% - 50px)}.group-wrapper[_ngcontent-%COMP%]   .group-list[_ngcontent-%COMP%]{flex:1;overflow:auto;margin-top:0}.group-wrapper[_ngcontent-%COMP%]   .group-list[_ngcontent-%COMP%]   tr.active[_ngcontent-%COMP%]{background-color:var(--color-component-bg-200)}.group-wrapper[_ngcontent-%COMP%]   .group-list.expanded[_ngcontent-%COMP%]{width:calc(100% - 40vw)}.group-members[_ngcontent-%COMP%]{height:100%;width:0;opacity:0;visibility:hidden;overflow:auto;transition:width .3s,opacity .2s .3s,visibility 0s .3s}.group-members.expanded[_ngcontent-%COMP%]{width:40vw;visibility:visible;opacity:1;padding-left:12px}.group-members[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{margin:0;background:none;border:none;cursor:pointer}.group-members[_ngcontent-%COMP%]     table.table{margin-top:0}.group-members[_ngcontent-%COMP%]     table.table th{top:0}.group-members[_ngcontent-%COMP%]   .controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between}vdr-empty-placeholder[_ngcontent-%COMP%]{flex:1}"],changeDetection:0});var Bt=s(430);const Ht=function(){return["./create"]};function Vt(e,t){1&e&&(n.TgZ(0,"a",5),n._UZ(1,"clr-icon",6),n._uU(2),n.ALo(3,"translate"),n.qZA()),2&e&&(n.Q6J("routerLink",n.DdM(4,Ht)),n.xp6(2),n.hij(" ",n.lcZ(3,2,"customer.create-new-customer")," "))}const Xt=function(e){return["./",e]};function Wt(e,t){if(1&e){const e=n.EpF();n.TgZ(0,"td",7),n._uU(1),n.qZA(),n.TgZ(2,"td",7),n._uU(3),n.qZA(),n.TgZ(4,"td",7),n._UZ(5,"vdr-customer-status-label",8),n.qZA(),n.TgZ(6,"td",9),n._UZ(7,"vdr-table-row-action",10),n.ALo(8,"translate"),n.qZA(),n.TgZ(9,"td"),n.TgZ(10,"vdr-dropdown"),n.TgZ(11,"button",11),n._uU(12),n.ALo(13,"translate"),n._UZ(14,"clr-icon",12),n.qZA(),n.TgZ(15,"vdr-dropdown-menu",13),n.TgZ(16,"button",14),n.NdJ("click",function(){const t=n.CHM(e).item;return n.oxw().deleteCustomer(t)}),n.ALo(17,"hasPermission"),n._UZ(18,"clr-icon",15),n._uU(19),n.ALo(20,"translate"),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&e){const e=t.item;n.xp6(1),n.lnq(" ",e.title," ",e.firstName," ",e.lastName," "),n.xp6(2),n.Oqu(e.emailAddress),n.xp6(2),n.Q6J("customer",e),n.xp6(2),n.Q6J("label",n.lcZ(8,10,"common.edit"))("linkTo",n.VKq(18,Xt,e.id)),n.xp6(5),n.hij(" ",n.lcZ(13,12,"common.actions")," "),n.xp6(4),n.Q6J("disabled",!n.lcZ(17,14,"DeleteCustomer")),n.xp6(3),n.hij(" ",n.lcZ(20,16,"common.delete")," ")}}class Kt extends c.t7C{constructor(e,t,s,r,o){super(t,s),this.dataService=e,this.modalService=r,this.notificationService=o,this.searchTerm=new l.NI(""),super.setQueryFn((...e)=>this.dataService.customer.getCustomerList(...e).refetchOnChannelChange(),e=>e.customers,(e,t)=>({options:{skip:e,take:t,filter:{emailAddress:{contains:this.searchTerm.value},lastName:{contains:this.searchTerm.value},postalCode:{contains:this.searchTerm.value}},filterOperator:c.FnJ.OR,sort:{createdAt:Bt.As.DESC}}}))}ngOnInit(){super.ngOnInit(),this.searchTerm.valueChanges.pipe((0,F.h)(e=>2<e.length||0===e.length),(0,g.b)(250),(0,f.R)(this.destroy$)).subscribe(()=>this.refresh())}deleteCustomer(e){return this.modalService.dialog({title:(0,re.J)("catalog.confirm-delete-customer"),body:`${e.firstName} ${e.lastName}`,buttons:[{type:"secondary",label:(0,re.J)("common.cancel")},{type:"danger",label:(0,re.J)("common.delete"),returnValue:!0}]}).pipe((0,o.w)(t=>t?this.dataService.customer.deleteCustomer(e.id):ce.E)).subscribe(()=>{this.notificationService.success((0,re.J)("common.notify-delete-success"),{entity:"Customer"}),this.refresh()},e=>{this.notificationService.error((0,re.J)("common.notify-delete-error"),{entity:"Customer"})})}}Kt.\u0275fac=function(e){return new(e||Kt)(n.Y36(c.DoR),n.Y36(Z.F0),n.Y36(Z.gz),n.Y36(c.Z7U),n.Y36(c.gqp))},Kt.\u0275cmp=n.Xpm({type:Kt,selectors:[["vdr-customer-list"]],features:[n.qOj],decls:24,vars:28,consts:[["type","text","name","emailSearchTerm",1,"search-input","ml3",3,"formControl","placeholder"],["locationId","customer-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[3,"expand"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[3,"customer"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"]],template:function(e,t){1&e&&(n.TgZ(0,"vdr-action-bar"),n.TgZ(1,"vdr-ab-left"),n._UZ(2,"input",0),n.ALo(3,"translate"),n.qZA(),n.TgZ(4,"vdr-ab-right"),n._UZ(5,"vdr-action-bar-items",1),n.YNc(6,Vt,4,5,"a",2),n.qZA(),n.qZA(),n.TgZ(7,"vdr-data-table",3),n.NdJ("pageChange",function(e){return t.setPageNumber(e)})("itemsPerPageChange",function(e){return t.setItemsPerPage(e)}),n.ALo(8,"async"),n.ALo(9,"async"),n.ALo(10,"async"),n.ALo(11,"async"),n.TgZ(12,"vdr-dt-column",4),n._uU(13),n.ALo(14,"translate"),n.qZA(),n.TgZ(15,"vdr-dt-column",4),n._uU(16),n.ALo(17,"translate"),n.qZA(),n.TgZ(18,"vdr-dt-column"),n._uU(19),n.ALo(20,"translate"),n.qZA(),n._UZ(21,"vdr-dt-column"),n._UZ(22,"vdr-dt-column"),n.YNc(23,Wt,21,20,"ng-template"),n.qZA()),2&e&&(n.xp6(2),n.Q6J("formControl",t.searchTerm)("placeholder",n.lcZ(3,12,"customer.search-customers-by-email-last-name-postal-code")),n.xp6(4),n.Q6J("vdrIfPermissions","CreateCustomer"),n.xp6(1),n.Q6J("items",n.lcZ(8,14,t.items$))("itemsPerPage",n.lcZ(9,16,t.itemsPerPage$))("totalItems",n.lcZ(10,18,t.totalItems$))("currentPage",n.lcZ(11,20,t.currentPage$)),n.xp6(5),n.Q6J("expand",!0),n.xp6(1),n.Oqu(n.lcZ(14,22,"customer.name")),n.xp6(2),n.Q6J("expand",!0),n.xp6(1),n.Oqu(n.lcZ(17,24,"customer.email-address")),n.xp6(3),n.Oqu(n.lcZ(20,26,"customer.customer-type")))},directives:[be.Kk,be.BN,v.y,l.Fj,l.JJ,l.oH,be.mz,_e.W,Ne.H,b.Q,A.E,Z.yS,j.qvL,Te,x.v,R.J,B.U,H.N,V.H],pipes:[C.X$,y.Ov,T.j],styles:[".search-input[_ngcontent-%COMP%]{margin-top:6px;min-width:300px}"]});class zt extends c.p_9{constructor(e,t){super(e,{__typename:"Customer",id:"",createdAt:"",updatedAt:"",title:"",firstName:"",lastName:"",emailAddress:"",phoneNumber:null,addresses:null,user:null},e=>t.customer.getCustomer(e).mapStream(e=>e.customer))}}zt.\u0275fac=function(e){return new(e||zt)(n.LFG(Z.F0),n.LFG(c.DoR))},zt.\u0275prov=n.Yz7({token:zt,factory:zt.\u0275fac,providedIn:"root"});const es=[{path:"customers",component:Kt,pathMatch:"",data:{breadcrumb:(0,re.J)("breadcrumb.customers")}},{path:"customers/:id",component:_t,resolve:(0,c.Po4)(zt),canDeactivate:[c.TSp],data:{breadcrumb:ts}},{path:"groups",component:Rt,data:{breadcrumb:(0,re.J)("breadcrumb.customer-groups")}}];function ts(e,t){return(0,c.YWC)({entity:e.entity,id:t.id,breadcrumbKey:"breadcrumb.customers",getName:e=>`${e.firstName} ${e.lastName}`,route:"customers"})}class ss{}ss.\u0275fac=function(e){return new(e||ss)},ss.\u0275mod=n.oAB({type:ss}),ss.\u0275inj=n.cJS({imports:[[c.m81,Z.Bz.forChild(es)]]})}}]);
//# sourceMappingURL=776-es2015.ff2bca4790d73c9fecfe.js.map