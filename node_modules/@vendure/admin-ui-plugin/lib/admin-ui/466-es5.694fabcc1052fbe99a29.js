!function(){"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function r(e,r,t){return r&&n(e.prototype,r),t&&n(e,t),e}(self.webpackChunk_vendure_admin_ui=self.webpackChunk_vendure_admin_ui||[]).push([[466],{62466:function(n,t,a){a.r(t),a.d(t,{LoginComponent:function(){return b},LoginGuard:function(){return x},LoginModule:function(){return y},loginRoutes:function(){return Z}});var i=a(83671),o=a(30464),s=a(16320),c=a(1707),l=a(51546),u=a(57890),g=a(54364),p=a(70325);function d(e,n){1&e&&(o.TgZ(0,"span"),o._uU(1,"-"),o.qZA())}function h(e,n){if(1&e&&(o.TgZ(0,"span"),o._uU(1),o.YNc(2,d,2,0,"span",12),o.qZA()),2&e){var r=o.oxw();o.xp6(1),o.hij("",r.brand," "),o.xp6(1),o.Q6J("ngIf",!r.hideVendureBranding||!r.hideVersion)}}function m(e,n){1&e&&(o.TgZ(0,"span"),o._uU(1,"vendure"),o.qZA())}function f(e,n){if(1&e&&(o.TgZ(0,"span"),o._uU(1),o.qZA()),2&e){var r=o.oxw();o.xp6(1),o.hij("v",r.version,"")}}var b=function(){function n(r,t){e(this,n),this.authService=r,this.router=t,this.username="",this.password="",this.rememberMe=!1,this.version=i.s5M,this.brand=(0,i.hq7)().brand,this.hideVendureBranding=(0,i.hq7)().hideVendureBranding,this.hideVersion=(0,i.hq7)().hideVersion}return r(n,[{key:"logIn",value:function(){var e=this;this.errorMessage=void 0,this.authService.logIn(this.username,this.password,this.rememberMe).subscribe(function(n){switch(n.__typename){case"CurrentUser":var r=e.getRedirectRoute();e.router.navigateByUrl(r||"/");break;case"InvalidCredentialsError":case"NativeAuthStrategyError":e.errorMessage=n.message}})}},{key:"getRedirectRoute",value:function(){var e,n=new RegExp("".concat(i.ONw,"=(.*)"));try{var r=window.location.search.match(n);r&&1<r.length&&(e=atob(decodeURIComponent(r[1])))}catch(r){}return e}}]),n}();b.\u0275fac=function(e){return new(e||b)(o.Y36(i.e80),o.Y36(s.F0))},b.\u0275cmp=o.Xpm({type:b,selectors:[["vdr-login"]],decls:25,vars:24,consts:[[1,"login-wrapper"],[1,"login"],[1,"title"],["src","assets/logo-300px.png"],[1,"login-group"],["type","text","name","username","id","login_username",1,"username",3,"ngModel","placeholder","ngModelChange"],["name","password","type","password","id","login_password",1,"password",3,"ngModel","placeholder","ngModelChange"],[1,"login-error",3,"clrAlertType","clrAlertClosable"],[1,"alert-text"],["type","checkbox","clrCheckbox","","id","rememberme","name","rememberme",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[1,"version"],[4,"ngIf"]],template:function(e,n){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"form",1),o.TgZ(2,"label",2),o._UZ(3,"img",3),o.qZA(),o.TgZ(4,"div",4),o.TgZ(5,"input",5),o.NdJ("ngModelChange",function(e){return n.username=e}),o.ALo(6,"translate"),o.qZA(),o.TgZ(7,"input",6),o.NdJ("ngModelChange",function(e){return n.password=e}),o.ALo(8,"translate"),o.qZA(),o.TgZ(9,"clr-alert",7),o.TgZ(10,"clr-alert-item"),o.TgZ(11,"span",8),o._uU(12),o.qZA(),o.qZA(),o.qZA(),o.TgZ(13,"clr-checkbox-wrapper"),o.TgZ(14,"input",9),o.NdJ("ngModelChange",function(e){return n.rememberMe=e}),o.qZA(),o.TgZ(15,"label"),o._uU(16),o.ALo(17,"translate"),o.qZA(),o.qZA(),o.TgZ(18,"button",10),o.NdJ("click",function(){return n.logIn()}),o._uU(19),o.ALo(20,"translate"),o.qZA(),o.qZA(),o.TgZ(21,"div",11),o.YNc(22,h,3,2,"span",12),o.YNc(23,m,2,0,"span",12),o.YNc(24,f,2,1,"span",12),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(5),o.Q6J("ngModel",n.username)("placeholder",o.lcZ(6,16,"common.username")),o.xp6(2),o.Q6J("ngModel",n.password)("placeholder",o.lcZ(8,18,"common.password")),o.xp6(2),o.ekj("visible",n.errorMessage),o.Q6J("clrAlertType","danger")("clrAlertClosable",!1),o.xp6(3),o.hij(" ",n.errorMessage," "),o.xp6(2),o.Q6J("ngModel",n.rememberMe),o.xp6(2),o.Oqu(o.lcZ(17,20,"common.remember-me")),o.xp6(2),o.Q6J("disabled",!n.username||!n.password),o.xp6(1),o.hij(" ",o.lcZ(20,22,"common.login")," "),o.xp6(3),o.Q6J("ngIf",n.brand),o.xp6(1),o.Q6J("ngIf",!n.hideVendureBranding),o.xp6(1),o.Q6J("ngIf",!n.hideVersion))},directives:[c._Y,c.JL,c.F,l.MgK,u.y,c.Fj,c.JJ,c.On,l.TIm,l.CyW,l.I9z,l.PEh,c.Wl,l.KKC,g.O5],pipes:[p.X$],styles:[".login-wrapper[_ngcontent-%COMP%]{background:var(--login-page-bg);background-size:auto;justify-content:center}.title[_ngcontent-%COMP%]{text-align:center}.version[_ngcontent-%COMP%]{flex:1;display:flex;align-items:flex-end;justify-content:center;color:var(--color-grey-300)}.version[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-left:5px}.login-error[_ngcontent-%COMP%]{max-height:0;overflow:hidden}.login-error.visible[_ngcontent-%COMP%]{max-height:46px;transition:max-height .2s;-webkit-animation:shake .82s cubic-bezier(.36,.07,.19,.97) both;animation:shake .82s cubic-bezier(.36,.07,.19,.97) both;-webkit-animation-delay:.2s;animation-delay:.2s;transform:translate(0);-webkit-backface-visibility:hidden;backface-visibility:hidden;perspective:1000px}@-webkit-keyframes shake{10%,90%{transform:translate(-1px)}20%,80%{transform:translate(2px)}30%,50%,70%{transform:translate(-4px)}40%,60%{transform:translate(4px)}}@keyframes shake{10%,90%{transform:translate(-1px)}20%,80%{transform:translate(2px)}30%,50%,70%{transform:translate(-4px)}40%,60%{transform:translate(4px)}}"]});var v=a(33927),x=function(){function n(r,t){e(this,n),this.router=r,this.authService=t}return r(n,[{key:"canActivate",value:function(e){var n=this;return this.authService.checkAuthenticatedStatus().pipe((0,v.U)(function(e){return e&&n.router.navigate(["/"]),!e}))}}]),n}();x.\u0275fac=function(e){return new(e||x)(o.LFG(s.F0),o.LFG(i.e80))},x.\u0275prov=o.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"});var Z=[{path:"",component:b,pathMatch:"full",canActivate:[x]}],y=function n(){e(this,n)};y.\u0275fac=function(e){return new(e||y)},y.\u0275mod=o.oAB({type:y}),y.\u0275inj=o.cJS({imports:[[i.m81,s.Bz.forChild(Z)]]})}}])}();
//# sourceMappingURL=466-es5.694fabcc1052fbe99a29.js.map