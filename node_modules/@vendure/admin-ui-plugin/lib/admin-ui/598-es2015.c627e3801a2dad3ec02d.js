"use strict";(self.webpackChunk_vendure_admin_ui=self.webpackChunk_vendure_admin_ui||[]).push([[598],{26598:function(t,o,e){e.r(o),e.d(o,{MarketingModule:function(){return at},PromotionDetailComponent:function(){return S},PromotionListComponent:function(){return nt},PromotionResolver:function(){return it},marketingRoutes:function(){return rt},promotionBreadcrumb:function(){return st}});var n=e(1707),i=e(30724),r=e(83671),s=e(53466),a=e(85816),c=e(30464),d=e(16320),l=e(27346),m=e(33146),u=e(59416),p=e(38276),g=e(54364),f=e(34652),h=e(57890),Z=e(56852),A=e(82505),v=e(51546),b=e(50837),y=e(54116),x=e(30735),C=e(41519),q=e(28854),F=e(15111),P=e(70325),T=e(97388);const U=function(){return["enabled"]};function J(t,o){if(1&t&&(c.TgZ(0,"clr-toggle-wrapper"),c._UZ(1,"input",25),c.TgZ(2,"label"),c._uU(3),c.ALo(4,"translate"),c.qZA(),c.qZA()),2&t){const t=c.oxw();c.xp6(1),c.Q6J("formControl",t.detailForm.get(c.DdM(4,U))),c.xp6(2),c.Oqu(c.lcZ(4,2,"common.enabled"))}}function k(t,o){if(1&t){const t=c.EpF();c.TgZ(0,"button",26),c.NdJ("click",function(){return c.CHM(t),c.oxw().create()}),c._uU(1),c.ALo(2,"translate"),c.qZA()}if(2&t){const t=c.oxw();c.Q6J("disabled",!t.saveButtonEnabled()),c.xp6(1),c.hij(" ",c.lcZ(2,2,"common.create")," ")}}function _(t,o){if(1&t){const t=c.EpF();c.TgZ(0,"button",26),c.NdJ("click",function(){return c.CHM(t),c.oxw(2).save()}),c._uU(1),c.ALo(2,"translate"),c.qZA()}if(2&t){const t=c.oxw(2);c.Q6J("disabled",!t.saveButtonEnabled()),c.xp6(1),c.hij(" ",c.lcZ(2,2,"common.update")," ")}}function L(t,o){1&t&&c.YNc(0,_,3,4,"button",27),2&t&&c.Q6J("vdrIfPermissions","UpdatePromotion")}function O(t,o){if(1&t&&(c.TgZ(0,"section",28),c.TgZ(1,"label"),c._uU(2),c.ALo(3,"translate"),c.qZA(),c._UZ(4,"vdr-tabbed-custom-fields",29),c.ALo(5,"hasPermission"),c.qZA()),2&t){const t=c.oxw();c.xp6(2),c.Oqu(c.lcZ(3,4,"common.custom-fields")),c.xp6(2),c.Q6J("customFields",t.customFields)("customFieldsFormGroup",t.detailForm.get("customFields"))("readonly",!c.lcZ(5,6,"UpdatePromotion"))}}function w(t,o){if(1&t){const t=c.EpF();c.ynx(0),c.TgZ(1,"vdr-configurable-input",30),c.NdJ("remove",function(o){return c.CHM(t),c.oxw().removeCondition(o)}),c.ALo(2,"hasPermission"),c.qZA(),c.BQk()}if(2&t){const t=o.$implicit,e=o.index,n=c.oxw();c.xp6(1),c.Q6J("readonly",!c.lcZ(2,4,"UpdatePromotion"))("operation",t)("operationDefinition",n.getConditionDefinition(t))("formControlName",e)}}function N(t,o){if(1&t){const t=c.EpF();c.TgZ(0,"button",35),c.NdJ("click",function(){const o=c.CHM(t).$implicit;return c.oxw(2).addCondition(o)}),c._uU(1),c.qZA()}if(2&t){const t=o.$implicit;c.xp6(1),c.hij(" ",t.description," ")}}function Q(t,o){if(1&t&&(c.TgZ(0,"vdr-dropdown"),c.TgZ(1,"button",31),c._UZ(2,"clr-icon",32),c._uU(3),c.ALo(4,"translate"),c.qZA(),c.TgZ(5,"vdr-dropdown-menu",33),c.YNc(6,N,2,1,"button",34),c.qZA(),c.qZA()),2&t){const t=c.oxw();c.xp6(3),c.hij(" ",c.lcZ(4,2,"marketing.add-condition")," "),c.xp6(3),c.Q6J("ngForOf",t.getAvailableConditions())}}function I(t,o){if(1&t){const t=c.EpF();c.TgZ(0,"vdr-configurable-input",36),c.NdJ("remove",function(o){return c.CHM(t),c.oxw().removeAction(o)}),c.ALo(1,"hasPermission"),c.qZA()}if(2&t){const t=o.$implicit,e=o.index,n=c.oxw();c.Q6J("operation",t)("readonly",!c.lcZ(1,4,"UpdatePromotion"))("operationDefinition",n.getActionDefinition(t))("formControlName",e)}}function D(t,o){if(1&t){const t=c.EpF();c.TgZ(0,"button",35),c.NdJ("click",function(){const o=c.CHM(t).$implicit;return c.oxw(2).addAction(o)}),c._uU(1),c.qZA()}if(2&t){const t=o.$implicit;c.xp6(1),c.hij(" ",t.description," ")}}function Y(t,o){if(1&t&&(c.TgZ(0,"vdr-dropdown"),c.TgZ(1,"button",31),c._UZ(2,"clr-icon",32),c._uU(3),c.ALo(4,"translate"),c.qZA(),c.TgZ(5,"vdr-dropdown-menu",33),c.YNc(6,D,2,1,"button",34),c.qZA(),c.qZA()),2&t){const t=c.oxw();c.xp6(3),c.hij(" ",c.lcZ(4,2,"marketing.add-action")," "),c.xp6(3),c.Q6J("ngForOf",t.getAvailableActions())}}class S extends r.UT_{constructor(t,o,e,i,r,s,a){super(o,t,e,r),this.changeDetector=i,this.dataService=r,this.formBuilder=s,this.notificationService=a,this.conditions=[],this.actions=[],this.allConditions=[],this.allActions=[],this.customFields=this.getCustomFieldConfig("Promotion"),this.detailForm=this.formBuilder.group({name:["",n.kI.required],enabled:!0,couponCode:null,perCustomerUsageLimit:null,startsAt:null,endsAt:null,conditions:this.formBuilder.array([]),actions:this.formBuilder.array([]),customFields:this.formBuilder.group(this.customFields.reduce((t,o)=>Object.assign(Object.assign({},t),{[o.name]:""}),{}))})}ngOnInit(){this.init(),this.promotion$=this.entity$,this.dataService.promotion.getPromotionActionsAndConditions().single$.subscribe(t=>{this.allActions=t.promotionActions,this.allConditions=t.promotionConditions,this.changeDetector.markForCheck()})}ngOnDestroy(){this.destroy()}getAvailableConditions(){return this.allConditions.filter(t=>!this.conditions.find(o=>o.code===t.code))}getConditionDefinition(t){return this.allConditions.find(o=>o.code===t.code)}getAvailableActions(){return this.allActions.filter(t=>!this.actions.find(o=>o.code===t.code))}getActionDefinition(t){return this.allActions.find(o=>o.code===t.code)}saveButtonEnabled(){return this.detailForm.dirty&&this.detailForm.valid&&(0!==this.conditions.length||this.detailForm.value.couponCode)&&0!==this.actions.length}addCondition(t){this.addOperation("conditions",t),this.detailForm.markAsDirty()}addAction(t){this.addOperation("actions",t),this.detailForm.markAsDirty()}removeCondition(t){this.removeOperation("conditions",t),this.detailForm.markAsDirty()}removeAction(t){this.removeOperation("actions",t),this.detailForm.markAsDirty()}formArrayOf(t){return this.detailForm.get(t)}create(){if(!this.detailForm.dirty)return;const t=this.detailForm.value,o={name:t.name,enabled:!0,couponCode:t.couponCode,perCustomerUsageLimit:t.perCustomerUsageLimit,startsAt:t.startsAt,endsAt:t.endsAt,conditions:this.mapOperationsToInputs(this.conditions,t.conditions),actions:this.mapOperationsToInputs(this.actions,t.actions),customFields:t.customFields};this.dataService.promotion.createPromotion(o).subscribe(({createPromotion:t})=>{switch(t.__typename){case"Promotion":this.notificationService.success((0,i.J)("common.notify-create-success"),{entity:"Promotion"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck(),this.router.navigate(["../",t.id],{relativeTo:this.route});break;case"MissingConditionsError":this.notificationService.error(t.message)}},t=>{this.notificationService.error((0,i.J)("common.notify-create-error"),{entity:"Promotion"})})}save(){if(!this.detailForm.dirty)return;const t=this.detailForm.value;this.promotion$.pipe((0,s.q)(1),(0,a.zg)(o=>{const e={id:o.id,name:t.name,enabled:t.enabled,couponCode:t.couponCode,perCustomerUsageLimit:t.perCustomerUsageLimit,startsAt:t.startsAt,endsAt:t.endsAt,conditions:this.mapOperationsToInputs(this.conditions,t.conditions),actions:this.mapOperationsToInputs(this.actions,t.actions),customFields:t.customFields};return this.dataService.promotion.updatePromotion(e)})).subscribe(t=>{this.notificationService.success((0,i.J)("common.notify-update-success"),{entity:"Promotion"}),this.detailForm.markAsPristine(),this.changeDetector.markForCheck()},t=>{this.notificationService.error((0,i.J)("common.notify-update-error"),{entity:"Promotion"})})}setFormValues(t,o){this.detailForm.patchValue({name:t.name,enabled:t.enabled,couponCode:t.couponCode,perCustomerUsageLimit:t.perCustomerUsageLimit,startsAt:t.startsAt,endsAt:t.endsAt}),t.conditions.forEach(t=>{this.addOperation("conditions",t)}),t.actions.forEach(t=>this.addOperation("actions",t)),this.customFields.length&&this.setCustomFieldFormValues(this.customFields,this.detailForm.get("customFields"),t)}mapOperationsToInputs(t,o){return t.map((t,e)=>({code:t.code,arguments:Object.values(o[e].args).map((o,e)=>({name:t.args[e].name,value:(0,r.qrw)(o)}))}))}addOperation(t,o){const e=this.formArrayOf(t),n="conditions"===t?this.conditions:this.actions;if(-1===e.value.findIndex(t=>t.code===o.code)){const i=o.args.reduce((e,n)=>{var i;return Object.assign(Object.assign({},e),{[n.name]:null!==(i=(0,r.sux)(n.value))&&void 0!==i?i:this.getDefaultArgValue(t,o,n.name)})},{});e.push(this.formBuilder.control({code:o.code,args:i})),n.push({code:o.code,args:o.args.map(t=>({name:t.name,value:(0,r.sux)(t.value)}))})}}getDefaultArgValue(t,o,e){const n="conditions"===t?this.allConditions.find(t=>t.code===o.code):this.allActions.find(t=>t.code===o.code);if(n){const t=n.args.find(t=>t.name===e);if(t)return(0,r.NWQ)(t)}throw new Error('Could not determine default value for "argName"')}removeOperation(t,o){const e=this.formArrayOf(t),n="conditions"===t?this.conditions:this.actions,i=e.value.findIndex(t=>t.code===o.code);-1!==i&&(e.removeAt(i),n.splice(i,1))}}S.\u0275fac=function(t){return new(t||S)(c.Y36(d.F0),c.Y36(d.gz),c.Y36(r.iHG),c.Y36(c.sBO),c.Y36(r.DoR),c.Y36(n.qu),c.Y36(r.gqp))},S.\u0275cmp=c.Xpm({type:S,selectors:[["vdr-promotion-detail"]],features:[c.qOj],decls:48,vars:46,consts:[[1,"flex","clr-align-items-center"],[3,"entity"],[4,"vdrIfPermissions"],["locationId","promotion-detail"],["class","btn btn-primary",3,"disabled","click",4,"ngIf","ngIfElse"],["updateButton",""],[1,"form",3,"formGroup"],["for","name",3,"label"],["id","name","type","text","formControlName","name",3,"readonly"],["for","startsAt",3,"label"],["formControlName","startsAt"],["for","endsAt",3,"label"],["formControlName","endsAt"],["for","couponCode",3,"label"],["id","couponCode","type","text","formControlName","couponCode",3,"readonly"],["for","perCustomerUsageLimit",3,"label"],["id","perCustomerUsageLimit","type","number","min","1","max","999","formControlName","perCustomerUsageLimit",3,"readonly"],["formGroupName","customFields",4,"ngIf"],["locationId","promotion-detail",3,"entity$","detailForm"],[1,"clr-row"],["formArrayName","conditions",1,"clr-col"],[1,"clr-control-label"],[4,"ngFor","ngForOf"],["formArrayName","actions",1,"clr-col"],[3,"operation","readonly","operationDefinition","formControlName","remove",4,"ngFor","ngForOf"],["type","checkbox","clrToggle","","name","enabled",3,"formControl"],[1,"btn","btn-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"vdrIfPermissions"],["formGroupName","customFields"],["entityName","Promotion",3,"customFields","customFieldsFormGroup","readonly"],[3,"readonly","operation","operationDefinition","formControlName","remove"],["vdrDropdownTrigger","",1,"btn","btn-outline"],["shape","plus"],["vdrPosition","bottom-left"],["type","button","vdrDropdownItem","",3,"click",4,"ngFor","ngForOf"],["type","button","vdrDropdownItem","",3,"click"],[3,"operation","readonly","operationDefinition","formControlName","remove"]],template:function(t,o){if(1&t&&(c.TgZ(0,"vdr-action-bar"),c.TgZ(1,"vdr-ab-left"),c.TgZ(2,"div",0),c._UZ(3,"vdr-entity-info",1),c.ALo(4,"async"),c.YNc(5,J,5,5,"clr-toggle-wrapper",2),c.qZA(),c.qZA(),c.TgZ(6,"vdr-ab-right"),c._UZ(7,"vdr-action-bar-items",3),c.YNc(8,k,3,4,"button",4),c.ALo(9,"async"),c.YNc(10,L,1,1,"ng-template",null,5,c.W1O),c.qZA(),c.qZA(),c.TgZ(12,"form",6),c.TgZ(13,"vdr-form-field",7),c.ALo(14,"translate"),c._UZ(15,"input",8),c.ALo(16,"hasPermission"),c.qZA(),c.TgZ(17,"vdr-form-field",9),c.ALo(18,"translate"),c._UZ(19,"vdr-datetime-picker",10),c.qZA(),c.TgZ(20,"vdr-form-field",11),c.ALo(21,"translate"),c._UZ(22,"vdr-datetime-picker",12),c.qZA(),c.TgZ(23,"vdr-form-field",13),c.ALo(24,"translate"),c._UZ(25,"input",14),c.ALo(26,"hasPermission"),c.qZA(),c.TgZ(27,"vdr-form-field",15),c.ALo(28,"translate"),c._UZ(29,"input",16),c.ALo(30,"hasPermission"),c.qZA(),c.YNc(31,O,6,8,"section",17),c._UZ(32,"vdr-custom-detail-component-host",18),c.TgZ(33,"div",19),c.TgZ(34,"div",20),c.TgZ(35,"label",21),c._uU(36),c.ALo(37,"translate"),c.qZA(),c.YNc(38,w,3,6,"ng-container",22),c.TgZ(39,"div"),c.YNc(40,Q,7,4,"vdr-dropdown",2),c.qZA(),c.qZA(),c.TgZ(41,"div",23),c.TgZ(42,"label",21),c._uU(43),c.ALo(44,"translate"),c.qZA(),c.YNc(45,I,2,6,"vdr-configurable-input",24),c.TgZ(46,"div"),c.YNc(47,Y,7,4,"vdr-dropdown",2),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t){const t=c.MAs(11);c.xp6(3),c.Q6J("entity",c.lcZ(4,22,o.entity$)),c.xp6(2),c.Q6J("vdrIfPermissions","UpdatePromotion"),c.xp6(3),c.Q6J("ngIf",c.lcZ(9,24,o.isNew$))("ngIfElse",t),c.xp6(4),c.Q6J("formGroup",o.detailForm),c.xp6(1),c.Q6J("label",c.lcZ(14,26,"common.name")),c.xp6(2),c.Q6J("readonly",!c.lcZ(16,28,"UpdatePromotion")),c.xp6(2),c.Q6J("label",c.lcZ(18,30,"marketing.starts-at")),c.xp6(3),c.Q6J("label",c.lcZ(21,32,"marketing.ends-at")),c.xp6(3),c.Q6J("label",c.lcZ(24,34,"marketing.coupon-code")),c.xp6(2),c.Q6J("readonly",!c.lcZ(26,36,"UpdatePromotion")),c.xp6(2),c.Q6J("label",c.lcZ(28,38,"marketing.per-customer-limit")),c.xp6(2),c.Q6J("readonly",!c.lcZ(30,40,"UpdatePromotion")),c.xp6(2),c.Q6J("ngIf",o.customFields.length),c.xp6(1),c.Q6J("entity$",o.entity$)("detailForm",o.detailForm),c.xp6(4),c.Oqu(c.lcZ(37,42,"marketing.conditions")),c.xp6(2),c.Q6J("ngForOf",o.conditions),c.xp6(2),c.Q6J("vdrIfPermissions","UpdatePromotion"),c.xp6(3),c.Oqu(c.lcZ(44,44,"marketing.actions")),c.xp6(2),c.Q6J("ngForOf",o.actions),c.xp6(2),c.Q6J("vdrIfPermissions","UpdatePromotion")}},directives:[l.Kk,l.BN,m.V,u.H,l.mz,p.W,g.O5,n._Y,n.JL,n.sg,f.h,h.y,n.Fj,n.JJ,n.u,Z.I,n.qQ,n.Fd,n.wV,A.C,n.CE,v.MgK,g.sg,v.PEh,n.Wl,v.KKC,n.oH,n.x0,b.y,y.q,x.J,C.U,v.qvL,q.N,F.H],pipes:[g.Ov,P.X$,T.j],styles:[""],changeDetection:0});var j=e(89919),$=e(8117),E=e(80639),B=e(22663),M=e(79902),H=e(20365),G=e(30901),V=e(28899),z=e(74447),K=e(2651);const R=function(){return["./create"]};function W(t,o){1&t&&(c.TgZ(0,"a",6),c._UZ(1,"clr-icon",7),c._uU(2),c.ALo(3,"translate"),c.qZA()),2&t&&(c.Q6J("routerLink",c.DdM(4,R)),c.xp6(2),c.hij(" ",c.lcZ(3,2,"marketing.create-new-promotion")," "))}function X(t,o){if(1&t&&(c.TgZ(0,"vdr-chip"),c._uU(1),c.qZA()),2&t){const t=c.oxw().item;c.xp6(1),c.hij(" ",t.couponCode," ")}}function tt(t,o){1&t&&(c.TgZ(0,"vdr-chip"),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&t&&(c.xp6(1),c.Oqu(c.lcZ(2,1,"common.disabled")))}const ot=function(t){return["./",t]};function et(t,o){if(1&t){const t=c.EpF();c.TgZ(0,"td",8),c._uU(1),c.qZA(),c.TgZ(2,"td",8),c.YNc(3,X,2,1,"vdr-chip",9),c.qZA(),c.TgZ(4,"td",8),c._uU(5),c.ALo(6,"localeDate"),c.qZA(),c.TgZ(7,"td",8),c._uU(8),c.ALo(9,"localeDate"),c.qZA(),c.TgZ(10,"td",10),c.YNc(11,tt,3,3,"vdr-chip",9),c.qZA(),c.TgZ(12,"td",11),c._UZ(13,"vdr-table-row-action",12),c.ALo(14,"translate"),c.qZA(),c.TgZ(15,"td",11),c.TgZ(16,"vdr-dropdown"),c.TgZ(17,"button",13),c._uU(18),c.ALo(19,"translate"),c._UZ(20,"clr-icon",14),c.qZA(),c.TgZ(21,"vdr-dropdown-menu",15),c.TgZ(22,"button",16),c.NdJ("click",function(){const o=c.CHM(t).item;return c.oxw().deletePromotion(o.id)}),c.ALo(23,"hasPermission"),c._UZ(24,"clr-icon",17),c._uU(25),c.ALo(26,"translate"),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=o.item;c.xp6(1),c.Oqu(t.name),c.xp6(2),c.Q6J("ngIf",t.couponCode),c.xp6(2),c.Oqu(c.xi3(6,10,t.startsAt,"longDate")),c.xp6(3),c.Oqu(c.xi3(9,13,t.endsAt,"longDate")),c.xp6(3),c.Q6J("ngIf",!t.enabled),c.xp6(2),c.Q6J("label",c.lcZ(14,16,"common.edit"))("linkTo",c.VKq(24,ot,t.id)),c.xp6(5),c.hij(" ",c.lcZ(19,18,"common.actions")," "),c.xp6(4),c.Q6J("disabled",!c.lcZ(23,20,"DeletePromotion")),c.xp6(3),c.hij(" ",c.lcZ(26,22,"common.delete")," ")}}class nt extends r.t7C{constructor(t,o,e,i,r){super(o,e),this.dataService=t,this.notificationService=i,this.modalService=r,this.searchForm=new n.cw({name:new n.NI(""),couponCode:new n.NI("")}),super.setQueryFn((...t)=>this.dataService.promotion.getPromotions(...t).refetchOnChannelChange(),t=>t.promotions,(t,o)=>this.createQueryOptions(t,o,this.searchForm.value))}ngOnInit(){super.ngOnInit(),(0,j.T)(this.searchForm.valueChanges.pipe((0,E.b)(250)),this.route.queryParamMap).pipe((0,B.R)(this.destroy$)).subscribe(t=>{t.params||this.setPageNumber(1),this.refresh()})}deletePromotion(t){this.modalService.dialog({title:(0,i.J)("catalog.confirm-delete-promotion"),buttons:[{type:"secondary",label:(0,i.J)("common.cancel")},{type:"danger",label:(0,i.J)("common.delete"),returnValue:!0}]}).pipe((0,M.w)(o=>o?this.dataService.promotion.deletePromotion(t):$.E)).subscribe(()=>{this.notificationService.success((0,i.J)("common.notify-delete-success"),{entity:"Promotion"}),this.refresh()},t=>{this.notificationService.error((0,i.J)("common.notify-delete-error"),{entity:"Promotion"})})}createQueryOptions(t,o,e){const n={};return e.couponCode&&(n.couponCode={contains:e.couponCode}),e.name&&(n.name={contains:e.name}),{options:{skip:t,take:o,filter:n}}}}nt.\u0275fac=function(t){return new(t||nt)(c.Y36(r.DoR),c.Y36(d.F0),c.Y36(d.gz),c.Y36(r.gqp),c.Y36(r.Z7U))},nt.\u0275cmp=c.Xpm({type:nt,selectors:[["vdr-promotion-list"]],features:[c.qOj],decls:31,vars:32,consts:[[1,"search-form",3,"formGroup"],["type","text","formControlName","name",1,"search-input",3,"placeholder"],["type","text","formControlName","couponCode",1,"search-input",3,"placeholder"],["locationId","promotion-list"],["class","btn btn-primary",3,"routerLink",4,"vdrIfPermissions"],[3,"items","itemsPerPage","totalItems","currentPage","pageChange","itemsPerPageChange"],[1,"btn","btn-primary",3,"routerLink"],["shape","plus"],[1,"left","align-middle"],[4,"ngIf"],[1,"align-middle"],[1,"right","align-middle"],["iconShape","edit",3,"label","linkTo"],["type","button","vdrDropdownTrigger","",1,"btn","btn-link","btn-sm"],["shape","caret down"],["vdrPosition","bottom-right"],["type","button","vdrDropdownItem","",1,"delete-button",3,"disabled","click"],["shape","trash",1,"is-danger"]],template:function(t,o){1&t&&(c.TgZ(0,"vdr-action-bar"),c.TgZ(1,"vdr-ab-left"),c.TgZ(2,"form",0),c._UZ(3,"input",1),c.ALo(4,"translate"),c._UZ(5,"input",2),c.ALo(6,"translate"),c.qZA(),c.qZA(),c.TgZ(7,"vdr-ab-right"),c._UZ(8,"vdr-action-bar-items",3),c.YNc(9,W,4,5,"a",4),c.qZA(),c.qZA(),c.TgZ(10,"vdr-data-table",5),c.NdJ("pageChange",function(t){return o.setPageNumber(t)})("itemsPerPageChange",function(t){return o.setItemsPerPage(t)}),c.ALo(11,"async"),c.ALo(12,"async"),c.ALo(13,"async"),c.ALo(14,"async"),c.TgZ(15,"vdr-dt-column"),c._uU(16),c.ALo(17,"translate"),c.qZA(),c.TgZ(18,"vdr-dt-column"),c._uU(19),c.ALo(20,"translate"),c.qZA(),c.TgZ(21,"vdr-dt-column"),c._uU(22),c.ALo(23,"translate"),c.qZA(),c.TgZ(24,"vdr-dt-column"),c._uU(25),c.ALo(26,"translate"),c.qZA(),c._UZ(27,"vdr-dt-column"),c._UZ(28,"vdr-dt-column"),c._UZ(29,"vdr-dt-column"),c.YNc(30,et,27,26,"ng-template"),c.qZA()),2&t&&(c.xp6(2),c.Q6J("formGroup",o.searchForm),c.xp6(1),c.Q6J("placeholder",c.lcZ(4,12,"marketing.search-by-name")),c.xp6(2),c.Q6J("placeholder",c.lcZ(6,14,"marketing.search-by-coupon-code")),c.xp6(4),c.Q6J("vdrIfPermissions","CreatePromotion"),c.xp6(1),c.Q6J("items",c.lcZ(11,16,o.items$))("itemsPerPage",c.lcZ(12,18,o.itemsPerPage$))("totalItems",c.lcZ(13,20,o.totalItems$))("currentPage",c.lcZ(14,22,o.currentPage$)),c.xp6(6),c.Oqu(c.lcZ(17,24,"common.name")),c.xp6(3),c.Oqu(c.lcZ(20,26,"marketing.coupon-code")),c.xp6(3),c.Oqu(c.lcZ(23,28,"marketing.starts-at")),c.xp6(3),c.Oqu(c.lcZ(26,30,"marketing.ends-at")))},directives:[l.Kk,l.BN,n._Y,n.JL,n.sg,h.y,n.Fj,n.JJ,n.u,l.mz,p.W,u.H,H.Q,G.E,d.yS,v.qvL,g.O5,V.v,x.J,C.U,q.N,F.H,z.Y],pipes:[P.X$,g.Ov,K.H,T.j],styles:[".search-form[_ngcontent-%COMP%]{padding:0}.search-input[_ngcontent-%COMP%]{margin:6px 8px 0 0;min-width:200px}"],changeDetection:0});class it extends r.p_9{constructor(t,o){super(t,{__typename:"Promotion",id:"",createdAt:"",updatedAt:"",name:"",enabled:!1,conditions:[],actions:[]},t=>o.promotion.getPromotion(t).mapStream(t=>t.promotion))}}it.\u0275fac=function(t){return new(t||it)(c.LFG(d.F0),c.LFG(r.DoR))},it.\u0275prov=c.Yz7({token:it,factory:it.\u0275fac,providedIn:"root"});const rt=[{path:"promotions",component:nt,data:{breadcrumb:(0,i.J)("breadcrumb.promotions")}},{path:"promotions/:id",component:S,resolve:(0,r.Po4)(it),canDeactivate:[r.TSp],data:{breadcrumb:st}}];function st(t,o){return(0,r.YWC)({entity:t.entity,id:o.id,breadcrumbKey:"breadcrumb.promotions",getName:t=>t.name,route:"promotions"})}class at{}at.\u0275fac=function(t){return new(t||at)},at.\u0275mod=c.oAB({type:at}),at.\u0275inj=c.cJS({imports:[[r.m81,d.Bz.forChild(rt)]]})}}]);
//# sourceMappingURL=598-es2015.c627e3801a2dad3ec02d.js.map